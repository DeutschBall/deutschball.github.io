<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Cascadia Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"deutschball.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"万一找到了呢","hits_empty":"你说的 ${query} 我怎么找不着呢 ","hits_stats":"找到了 ${hits} 个结果，用时 ${time} 毫秒"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":-1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="gbd调试器的使用 环境:Win11+Kali子系统 启动 启动gdb 123456789101112131415161718┌──(root㉿Executor)-[&#x2F;home&#x2F;kali]└─# gdbGNU gdb (Debian 10.1-2+b1) 10.1.90.20210103-gitCopyright (C) 2021 Free Software Foundation, Inc">
<meta property="og:type" content="article">
<meta property="og:title" content="gbd调试器的使用">
<meta property="og:url" content="http://deutschball.github.io/2022/04/22/gdb%E8%B0%83%E8%AF%95%E5%99%A8/index.html">
<meta property="og:site_name" content="dustland">
<meta property="og:description" content="gbd调试器的使用 环境:Win11+Kali子系统 启动 启动gdb 123456789101112131415161718┌──(root㉿Executor)-[&#x2F;home&#x2F;kali]└─# gdbGNU gdb (Debian 10.1-2+b1) 10.1.90.20210103-gitCopyright (C) 2021 Free Software Foundation, Inc">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-04-22T11:57:20.000Z">
<meta property="article:modified_time" content="2023-09-20T08:14:03.044Z">
<meta property="article:author" content="dustball">
<meta property="article:tag" content="reverse">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://deutschball.github.io/2022/04/22/gdb%E8%B0%83%E8%AF%95%E5%99%A8/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>gbd调试器的使用 | dustland</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">dustland</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">dustball in dustland</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="algolia-results">
  <div id="algolia-stats"></div>
  <div id="algolia-hits"></div>
  <div id="algolia-pagination" class="algolia-pagination"></div>
</div>

      
    </div>
  </div>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/deutschball" class="github-corner" title="Follow me on GayHub" aria-label="Follow me on GayHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://deutschball.github.io/2022/04/22/gdb%E8%B0%83%E8%AF%95%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/DeutschBall/picbed/main/dustball.png">
      <meta itemprop="name" content="dustball">
      <meta itemprop="description" content="dustland">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dustland">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          gbd调试器的使用
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-22 19:57:20" itemprop="dateCreated datePublished" datetime="2022-04-22T19:57:20+08:00">2022-04-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-09-20 16:14:03" itemprop="dateModified" datetime="2023-09-20T16:14:03+08:00">2023-09-20</time>
              </span>

          
            <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="gbd调试器的使用">gbd调试器的使用</h1>
<p>环境:Win11+Kali子系统</p>
<h2 id="启动">启动</h2>
<h3 id="启动gdb">启动<code>gdb</code></h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali]</span><br><span class="line">└─# gdb</span><br><span class="line">GNU gdb (Debian 10.1-2+b1) 10.1.90.20210103-git</span><br><span class="line">Copyright (C) 2021 Free Software Foundation, Inc.</span><br><span class="line">License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;</span><br><span class="line">This is free software: you are free to change and redistribute it.</span><br><span class="line">There is NO WARRANTY, to the extent permitted by law.</span><br><span class="line">Type <span class="string">&quot;show copying&quot;</span> and <span class="string">&quot;show warranty&quot;</span> <span class="keyword">for</span> details.</span><br><span class="line">This GDB was configured as <span class="string">&quot;x86_64-linux-gnu&quot;</span>.</span><br><span class="line">Type <span class="string">&quot;show configuration&quot;</span> <span class="keyword">for</span> configuration details.</span><br><span class="line">For bug reporting instructions, please see:</span><br><span class="line">&lt;https://www.gnu.org/software/gdb/bugs/&gt;.</span><br><span class="line">Find the GDB manual and other documentation resources online at:</span><br><span class="line">    &lt;http://www.gnu.org/software/gdb/documentation/&gt;.</span><br><span class="line"></span><br><span class="line">For <span class="built_in">help</span>, <span class="built_in">type</span> <span class="string">&quot;help&quot;</span>.</span><br><span class="line">Type <span class="string">&quot;apropos word&quot;</span> to search <span class="keyword">for</span> commands related to <span class="string">&quot;word&quot;</span>.</span><br><span class="line">(gdb)</span><br></pre></td></tr></table></figure>
<p>看到命令提示符号变成<code>(gdb)</code>则启动成功</p>
<h3 id="安静启动gdb--q">安静启动<code>gdb -q</code></h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali]</span><br><span class="line">└─# gdb --silent</span><br><span class="line">(gdb)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--silent也可以写成-q,-quiet</span><br></pre></td></tr></table></figure>
<h3 id="分屏启动gdb--tui">分屏启动<code>gdb -tui</code></h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# gdb -tui</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220421202637748.png"
alt="image-20220421202637748" />
<figcaption aria-hidden="true">image-20220421202637748</figcaption>
</figure>
<p>上方窗口是源代码窗口,下方是gbd命令行窗口</p>
<p>这样启动不需要另开一个终端观察源代码</p>
<p>并且当程序在端点停下的时候上方窗口也会显示当前程序停止的位置</p>
<p>上方的源代码窗口使用上下箭头移动视野</p>
<h3
id="分屏安静指定调试程序gdb--tui--q-prog_name">分屏+安静+指定调试程序<code>gdb -tui -q &lt;prog_name&gt;</code></h3>
<p>注意使用gdb调试的文件必须是可执行文件(windows上的.exe或者linux上的.out等)</p>
<p>并且在编译该可执行文件的时候==必须加入-g选项==生成gbd调试信息</p>
<blockquote>
<p>如果不使用-g生成了.out文件然后使用gdb调试则</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# gcc main.c -Og -o  main.out</span><br><span class="line"></span><br><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# gdb --silent main.out</span><br><span class="line">Reading symbols from main.out...</span><br><span class="line">(No debugging symbols found <span class="keyword">in</span> main.out)			<span class="comment">#报告没有调试信息</span></span><br><span class="line">(gdb)</span><br></pre></td></tr></table></figure>
<p>使用-tui打开,源代码都看不到</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220421203357054.png"
alt="image-20220421203357054" />
<figcaption aria-hidden="true">image-20220421203357054</figcaption>
</figure>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# gcc main.c -Og -g -o main.out				<span class="comment">#使用-g选项生成调试信息</span></span><br><span class="line"></span><br><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# gdb -tui --silent main.out</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220421203550729.png"
alt="image-20220421203550729" />
<figcaption aria-hidden="true">image-20220421203550729</figcaption>
</figure>
<h4
id="带参数启动--args-程序-参数1-参数2...">带参数启动<code>--args  &lt;程序&gt; &lt;参数1&gt; &lt;参数2&gt;...</code></h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# gdb -q -tui --args main.out 1 2 3 4</span><br></pre></td></tr></table></figure>
<p>这里指定的参数1 2 3
4将会作为<code>main.out</code>执行时的命令行参数</p>
<h2 id="启动后运行前">启动后运行前</h2>
<p>加载需要调试的程序</p>
<p>当在命令行直接使用gdb命令打开gdb调试器时,此时是没有指定需要调试的程序的</p>
<h3 id="工作目录pwd">工作目录<code>pwd</code></h3>
<p>默认工作目录是打开gdb的位置,gdb启动后也可以使用<code>pwd</code>命令观察当前工作目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# gdb -q</span><br><span class="line">(gdb) <span class="built_in">pwd</span></span><br><span class="line">Working directory /home/kali/mydir.</span><br></pre></td></tr></table></figure>
<h3
id="指定调试程序位置file-prog_name">指定调试程序位置<code>file &lt;prog_name&gt;</code></h3>
<p>对于当前目录下的程序可以直接使用程序名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# <span class="built_in">ls</span> -l|gdb -q</span><br><span class="line">(gdb) Undefined <span class="built_in">command</span>: <span class="string">&quot;total&quot;</span>.  Try <span class="string">&quot;help&quot;</span>.</span><br><span class="line">(gdb) Undefined <span class="built_in">command</span>: <span class="string">&quot;-rw-r--r--&quot;</span>.  Try <span class="string">&quot;help&quot;</span>.</span><br><span class="line">(gdb) Undefined <span class="built_in">command</span>: <span class="string">&quot;-rwxr-xr-x&quot;</span>.  Try <span class="string">&quot;help&quot;</span>.</span><br><span class="line">(gdb) Undefined <span class="built_in">command</span>: <span class="string">&quot;-rw-r--r--&quot;</span>.  Try <span class="string">&quot;help&quot;</span>.</span><br><span class="line">(gdb) quit</span><br><span class="line"></span><br><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# <span class="built_in">ls</span> -l</span><br><span class="line">total 28</span><br><span class="line">-rw-r--r-- 1 root root   139 Apr 21 20:23 main.c</span><br><span class="line">-rwxr-xr-x 1 root root 17672 Apr 21 20:35 main.out</span><br><span class="line">-rw-r--r-- 1 root root    25 Apr 21 20:38 r.txt</span><br><span class="line"></span><br><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# gdb -q</span><br><span class="line">(gdb) file main.out</span><br><span class="line">Reading symbols from main.out...</span><br><span class="line">(gdb)</span><br></pre></td></tr></table></figure>
<p>对于其他目录下的可以使用绝对或者相对位置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(gdb) file /home/kali/mydir/main.out</span><br><span class="line">Load new symbol table from <span class="string">&quot;/home/kali/mydir/main.out&quot;</span>? (y or n) y</span><br><span class="line">Reading symbols from /home/kali/mydir/main.out...</span><br></pre></td></tr></table></figure>
<h3 id="查看信息">查看信息</h3>
<h4 id="查看当前工作目录pwd">查看当前工作目录<code>pwd</code></h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) <span class="built_in">pwd</span></span><br><span class="line">Working directory /home/kali/mydir.</span><br></pre></td></tr></table></figure>
<h4
id="查看是否找到目标程序文件list">查看是否找到目标程序文件<code>list</code></h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(gdb) list</span><br><span class="line">1       <span class="comment">#include &lt;stdio.h&gt;</span></span><br><span class="line">2       <span class="comment">#include &lt;stdlib.h&gt;</span></span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5       int main(int argc,char **argv)&#123;</span><br><span class="line">6               <span class="keyword">for</span>(int i=0;i&lt;argc;++i)&#123;</span><br><span class="line">7                       <span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>,argv[i]);</span><br><span class="line">8               &#125;</span><br><span class="line">9               <span class="built_in">return</span> 0;</span><br><span class="line">10      &#125;</span><br></pre></td></tr></table></figure>
<h4
id="查看调试程序语言show-language">查看调试程序语言<code>show language</code></h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) show language</span><br><span class="line">The current <span class="built_in">source</span> language is <span class="string">&quot;auto; currently c&quot;</span>.</span><br></pre></td></tr></table></figure>
<h4
id="查看源文件信息info-source">查看源文件信息<code>info source</code></h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(gdb) info <span class="built_in">source</span></span><br><span class="line">Current <span class="built_in">source</span> file is main.c</span><br><span class="line">Compilation directory is /home/kali/mydir</span><br><span class="line">Located <span class="keyword">in</span> /home/kali/mydir/main.c</span><br><span class="line">Contains 10 lines.</span><br><span class="line">Source language is c.</span><br><span class="line">Producer is GNU C17 11.2.0 -mtune=generic -march=x86-64 -g -Og -fasynchronous-unwind-tables.</span><br><span class="line">Compiled with DWARF 2 debugging format.</span><br><span class="line">Does not include preprocessor macro info.</span><br></pre></td></tr></table></figure>
<h4
id="查看可以设置的程序语言set-language">查看可以设置的程序语言<code>set language</code></h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) <span class="built_in">set</span> language</span><br><span class="line">Requires an argument. Valid arguments are auto, <span class="built_in">local</span>, unknown, ada, asm, c, c++, d, fortran, go, minimal, modula-2, objective-c, opencl, pascal, rust.</span><br></pre></td></tr></table></figure>
<h4
id="查看程序运行状态info-program">查看程序运行状态<code>info program</code></h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) info prog</span><br><span class="line">The program being debugged is not being run.</span><br></pre></td></tr></table></figure>
<h3 id="设置信息">设置信息</h3>
<h4
id="设置命令行参数set-args-参数1-参数2...">设置命令行参数<code>set args &lt;参数1&gt; &lt;参数2&gt;...</code></h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(gdb) set args 1 2 3</span><br><span class="line">(gdb) show args</span><br><span class="line">Argument list to give program being debugged when it is started is &quot;1 2 3&quot;.</span><br></pre></td></tr></table></figure>
<p>如果在启动时有指定参数,此时再用set指定参数则会覆盖启动时设置的参数</p>
<h4 id="设置语言set-language">设置语言'set language <语言>'</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) <span class="built_in">set</span> language c</span><br></pre></td></tr></table></figure>
<h2 id="运行">运行</h2>
<h3 id="运行程序run">运行程序<code>run</code></h3>
<p>命令行参数使用启动时指定的参数或者set
args设置的参数,如果都没有给定则无参数执行</p>
<p>如果有断点则程序在第一个断点处停止,否则直接运行完.</p>
<h4
id="带参数运行run-参数1-参数2...">带参数运行<code>run &lt;参数1&gt; &lt;参数2&gt;...</code></h4>
<p>此参数将会直接作为运行参数,覆盖前面设置的参数</p>
<h3 id="main停止运行start">main停止运行<code>start</code></h3>
<p><code>start</code>相当于在main函数处下了断点然后<code>run</code>,自动在main开始前停下</p>
<h2 id="运行时">运行时</h2>
<h3 id="断点">断点</h3>
<h4 id="设置断点b-行号">设置断点<code>b &lt;行号&gt;</code></h4>
<p>断点可以运行前设置也可以运行时设置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) b 6</span><br><span class="line">Breakpoint 6 at 0x555555555142: file main.c, line 6.</span><br></pre></td></tr></table></figure>
<p>如果以-tui分屏打开,则设置好的断点会显示在行号左侧,大写的B+&gt;意味当前程序暂停的断点</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220421213142314.png"
alt="image-20220421213142314" />
<figcaption aria-hidden="true">image-20220421213142314</figcaption>
</figure>
<h5
id="b-函数名直接给函数下断点"><code>b &lt;函数名&gt;</code>直接给函数下断点</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) b main</span><br><span class="line">Breakpoint 10 at 0x555555555139: file main.c, line 5.</span><br></pre></td></tr></table></figure>
<h4 id="删除断点-delete-断点编号">删除断点
<code>delete &lt;断点编号&gt;</code></h4>
<p>注意端点编号不是行号</p>
<p>删除全部断点则不指定编号,直接<code>delete</code></p>
<h5
id="删除指定行上的断点clear-行号">删除指定行上的断点<code>clear &lt;行号&gt;</code></h5>
<h4 id="条件断点b-if-条件">条件断点<code>b if &lt;条件&gt;</code></h4>
<p>比如如果没有输入命令行参数时才给main函数下断点</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) b main <span class="keyword">if</span> argc==1					<span class="comment">#用户没有输入时argc=1,第一个参数是当前程序位置</span></span><br><span class="line">Breakpoint 11 at 0x555555555139: file main.c, line 5.</span><br></pre></td></tr></table></figure>
<h4
id="查看断点信息info-b-断点号">查看断点信息<code>info b &lt;断点号&gt;</code></h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Breakpoint 11 at 0x555555555139: file main.c, line 5.</span><br><span class="line">(gdb) info b 11</span><br><span class="line">Num     Type           Disp Enb Address            What</span><br><span class="line">11      breakpoint     keep y   0x0000555555555139 <span class="keyword">in</span> main at main.c:5</span><br><span class="line">        stop only <span class="keyword">if</span> argc==1</span><br></pre></td></tr></table></figure>
<h5 id="info-b查看所有断点信息"><code>info b</code>查看所有断点信息</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(gdb) info b</span><br><span class="line">Num     Type           Disp Enb Address            What</span><br><span class="line">11      breakpoint     keep y   0x0000555555555139 <span class="keyword">in</span> main at main.c:5</span><br><span class="line">        stop only <span class="keyword">if</span> argc==1</span><br><span class="line">12      breakpoint     keep y   0x0000555555555142 <span class="keyword">in</span> main at main.c:6</span><br><span class="line">13      breakpoint     keep y   0x0000555555555149 <span class="keyword">in</span> main at main.c:7</span><br></pre></td></tr></table></figure>
<h3 id="查看信息-1">查看信息</h3>
<h4 id="print命令">print命令</h4>
<h5
id="查看函数信息p-函数名">查看函数信息<code>p &lt;函数名&gt;</code></h5>
<p>函数信息也可以在运行前查看</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) p main</span><br><span class="line"><span class="variable">$6</span> = &#123;int (int, char **)&#125; 0x555555555139 &lt;main&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;返回值类型(参数1类型,参数2类型)&#125; 函数地址 &lt;函数名&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(gdb) whatis main</span><br><span class="line">type = int (int, char **)</span><br><span class="line">(gdb) ptype main</span><br><span class="line">type = int (int, char **)</span><br></pre></td></tr></table></figure>
<h5
id="查看变量信息p-变量名">查看变量信息<code>p &lt;变量名&gt;</code></h5>
<p>查看变量信息必须是程序在该变量下文的断点处停下</p>
<p>即当前程序的运行位置必须已经经过变量,并且变量没有消亡</p>
<p>比如函数中的局部变量在函数返回之后就会消亡,只能在函数中断点然后查看断点之前的变量</p>
<p>如图调试一个用循环计算阶乘的函数,将断点下在第10行<code>result*=n</code>处</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422175357420.png"
alt="image-20220422175357420" />
<figcaption aria-hidden="true">image-20220422175357420</figcaption>
</figure>
<p>当程序第一次执行到次时会停在<code>result*=n</code>==执行前==的状态</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422175511240.png"
alt="image-20220422175511240" />
<figcaption aria-hidden="true">image-20220422175511240</figcaption>
</figure>
<p>如图第一次在第10行停下,打印result=1</p>
<h5
id="查看寄存器信息p-寄存器名">查看寄存器信息<code>p $&lt;寄存器名&gt;</code></h5>
<p>对于刚才的fact循环求阶乘函数,最后返回值是result,可想而知,该值是存放在rax寄存器中的</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">fact</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n&lt;<span class="number">0</span>)<span class="keyword">return</span> n;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">0</span>)<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> result=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(n&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                result*=n;</span><br><span class="line">                --n;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面调试程序验证猜想</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422180106540.png"
alt="image-20220422180106540" />
<figcaption aria-hidden="true">image-20220422180106540</figcaption>
</figure>
<p>还是将断点下到第10行while循环中</p>
<p>逐次进行循环,观察rax寄存器中的值</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422180159934.png"
alt="image-20220422180159934" />
<figcaption aria-hidden="true">image-20220422180159934</figcaption>
</figure>
<p>与result的变化是一致的</p>
<p><strong>也可以查看程序计数器<code>rip</code>中的值,观察程序当前进行位置</strong></p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422180413841.png"
alt="image-20220422180413841" />
<figcaption aria-hidden="true">image-20220422180413841</figcaption>
</figure>
<p>用objdump反编译然后观察fact+13处的指令</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422180540637.png"
alt="image-20220422180540637" />
<figcaption aria-hidden="true">image-20220422180540637</figcaption>
</figure>
<p><code>fact+13=0x1139+0x13=0x114c</code>,该位置是一个<code>test %edi,%edi</code>指令,而n作为第一个参数是存放在edi寄存器中的</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422180821161.png"
alt="image-20220422180821161" />
<figcaption aria-hidden="true">image-20220422180821161</figcaption>
</figure>
<p>紧接着114e处<code>jg 1146</code>意味如果<code>R[%edi]=n&gt;0</code>则跳转1146位置,</p>
<p>而1146位置在114e上方,相当于跳进了循环,</p>
<p>也就是说0x114c处相当于循环判断<code>while(n&gt;0)</code></p>
<p>即程序在第10行的断点停下时rip中是第9行中的条件判断指令</p>
<h4 id="x-检查字节或者字">x/<大小> <位置>检查字节或者字</h4>
<h5
id="x20b-fact检查fact函数的前20个字节"><code>x/20b fact</code>检查fact函数的前20个字节</h5>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422181438589.png"
alt="image-20220422181438589" />
<figcaption aria-hidden="true">image-20220422181438589</figcaption>
</figure>
<p>与objdump得到的反汇编是一样的</p>
<h5 id="x2g-0x555555555139-检查从0x555555555139地址开始的双字">x/2g
0x555555555139 检查从0x555555555139地址开始的双字</h5>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422181756825.png"
alt="image-20220422181756825" />
<figcaption aria-hidden="true">image-20220422181756825</figcaption>
</figure>
<h4 id="info命令">info命令</h4>
<h5
id="查看所有寄存器信息info-registers">查看所有寄存器信息<code>info registers</code></h5>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422181858252.png"
alt="image-20220422181858252" />
<figcaption aria-hidden="true">image-20220422181858252</figcaption>
</figure>
<p>其中<code>rax</code>存放result,<code>rdi</code>存放n</p>
<h5 id="查看栈帧info-frame">查看栈帧'info frame'</h5>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422182024087.png"
alt="image-20220422182024087" />
<figcaption aria-hidden="true">image-20220422182024087</figcaption>
</figure>
<h4 id="disas命令">disas命令</h4>
<h5
id="反汇编当前程序暂停的函数disas">反汇编当前程序暂停的函数<code>disas</code></h5>
<p>首先要在函数里下断点,然后程序在该断点暂停时使用disas可以观察当前函数的反汇编信息</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422182255390.png"
alt="image-20220422182255390" />
<figcaption aria-hidden="true">image-20220422182255390</figcaption>
</figure>
<p>可见反汇编信息中也会有当前断点位置信息</p>
<p>如此就不用再开一个终端使用objdump观察了</p>
<h5
id="反汇编指定名称的函数disas-函数名">反汇编指定名称的函数<code>disas &lt;函数名&gt;</code></h5>
<p>此方法不需要在函数中下断点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) disas fact</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422182507141.png"
alt="image-20220422182507141" />
<figcaption aria-hidden="true">image-20220422182507141</figcaption>
</figure>
<h5
id="反汇编某个地址附近的函数disas-地址">反汇编某个地址附近的函数<code>disas &lt;地址&gt;</code></h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">disas 0x000055555555514c</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422182706003.png"
alt="image-20220422182706003" />
<figcaption aria-hidden="true">image-20220422182706003</figcaption>
</figure>
<h3 id="继续执行">继续执行</h3>
<p>执行有多种情况,通常会与断点或者一些逻辑结构联合使用,</p>
<p>比如在断点处停下或者不停下</p>
<p>在循环处,在函数中都有特殊的命令决定如何执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">源代码层面</span><br><span class="line">next		单步执行,不进入函数,但是函数会执行然后返回值</span><br><span class="line">next n		单步执行n行,均不进入函数</span><br><span class="line"></span><br><span class="line">step		单步执行,进入函数</span><br><span class="line">step n		单步执行n行,均进入函数</span><br><span class="line"></span><br><span class="line"><span class="built_in">continue</span>	恢复执行,直到预见下一个断点</span><br><span class="line"><span class="built_in">continue</span> n	恢复执行,并忽略下面的n个断点</span><br><span class="line"></span><br><span class="line">finish		一直运行直到当前函数返回后停止,忽略断点</span><br><span class="line"></span><br><span class="line"><span class="built_in">return</span>		放弃后面的执行直接<span class="built_in">return</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">机器码层面(或者说汇编代码层面)</span><br><span class="line">stepi		单步执行一条指令,进入函数</span><br><span class="line">stepi n</span><br><span class="line"></span><br><span class="line">nexti		单步执行一条指令,不进入函数(不会call)</span><br><span class="line">nexti n</span><br><span class="line"></span><br><span class="line"><span class="keyword">until</span>		一直运行当前循环,在出循环之后的第一条语句停下,如果循环内有断点则在断点停下</span><br><span class="line">			实际上在机器码层面上,一直运行直到一个内存地址比当前更大的指令处停下</span><br></pre></td></tr></table></figure>
<h4 id="源代码层面">源代码层面</h4>
<p>以一个递归求阶乘的程序为例子</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# <span class="built_in">cat</span> main.c</span><br><span class="line"><span class="comment">#include &lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;stdlib.h&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">int fact(int n)&#123;</span><br><span class="line">        <span class="keyword">if</span>(n&lt;0)<span class="built_in">return</span> n;</span><br><span class="line">        <span class="keyword">if</span>(n==0)<span class="built_in">return</span> 1;</span><br><span class="line">        <span class="built_in">return</span> n*fact(n-1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">int main(int argc,char **argv)&#123;</span><br><span class="line">        int ans=123456;</span><br><span class="line">        ans=fact(9);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="next单步步过">next单步步过</h5>
<p>在main函数处下断点,使得程序上来先停一下,让我们有机会一行一行地执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) b main</span><br><span class="line">Breakpoint 3 at 0x55555555515a: file main.c, line 13.</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422185956239.png"
alt="image-20220422185956239" />
<figcaption aria-hidden="true">image-20220422185956239</figcaption>
</figure>
<p>第一个n命令使得程序断在<code>15:ans=fact(123456)</code></p>
<p>第二个n命令使得程序断在<code>16:printf("%d",ans)</code></p>
<p>此时使用print命令观察ans的值发现其确实是9的阶乘,即第15行是自动执行然后返回了值的,单步步过只是忽略了执行细节,只要函数的执行后果</p>
<h5 id="step单步步入">step单步步入</h5>
<p>还是在main函数处下断点,然后使用step</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422190333043.png"
alt="image-20220422190333043" />
<figcaption aria-hidden="true">image-20220422190333043</figcaption>
</figure>
<p>第一个step命令会让程序断在<code>15:ans=fact(9)</code>这与next是相同的</p>
<p>但是下一个step会进入step并在都5行停下</p>
<h5 id="continue执行到下一个断点">continue执行到下一个断点</h5>
<p>在main函数开始(line 13)和main函数中打印ans前(line16)各打一个断点</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422190554335.png"
alt="image-20220422190554335" />
<figcaption aria-hidden="true">image-20220422190554335</figcaption>
</figure>
<p>run运行之后会在13行停下,然后在输入c命令则会直接在16行停下</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422190646915.png"
alt="image-20220422190646915" />
<figcaption aria-hidden="true">image-20220422190646915</figcaption>
</figure>
<p>此时print命令打印ans值发现为362880确实是9的阶乘,即两个断点之间的所有程序都被执行过了</p>
<h5 id="finish一直运行到当前函数返回">finish一直运行到当前函数返回</h5>
<p>分两种情况,有没有进入函数</p>
<p>使用step命令让程序在第一层递归函数==入口前==停下,此时使用finish</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422191432439.png"
alt="image-20220422191432439" />
<figcaption aria-hidden="true">image-20220422191432439</figcaption>
</figure>
<p>发现程序直接返回到了main函数中,并且带着返回值<code>362880</code>恰好是9的阶乘,说明递归函数各层都执行了</p>
<p>现在让程序在第一层递归函数的==内部==停下</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422192218738.png"
alt="image-20220422192218738" />
<figcaption aria-hidden="true">image-20220422192218738</figcaption>
</figure>
<p>发现进入的递归函数的第二层</p>
<h5 id="return-放弃函数未执行的部分直接返回到调用者">return
放弃函数未执行的部分,直接返回到调用者</h5>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422192641695.png"
alt="image-20220422192641695" />
<figcaption aria-hidden="true">image-20220422192641695</figcaption>
</figure>
<p>fact(6)返回到fact(7)</p>
<p>然后一直使用finish命令返回main函数</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422192818544.png"
alt="image-20220422192818544" />
<figcaption aria-hidden="true">image-20220422192818544</figcaption>
</figure>
<p>发现ans值并没有被正确地计算</p>
<p>即return会放弃下文</p>
<h4 id="机器码层面">机器码层面</h4>
<h5
id="until-在循环体的机器码的最高地址时挑出循环到第一条高于循环地址的指令">until
在循环体的机器码的最高地址时挑出循环到第一条高于循环地址的指令</h5>
<p>调试一个使用循环计算阶乘的函数fact</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─<span class="meta"># cat main.c</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">fact</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n&lt;<span class="number">0</span>)<span class="keyword">return</span> n;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">0</span>)<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> result=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(n&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                result*=n;</span><br><span class="line">                --n;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc,<span class="type">char</span> **argv)</span>&#123;</span><br><span class="line">        <span class="type">int</span> ans=<span class="number">123456</span>;</span><br><span class="line">        ans=fact(<span class="number">9</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在main函数打一个断点方便单步调试</p>
<p>一直使用step单步步入命令,直到第一次到达while条件判断的时候,使用disas观察反汇编代码</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422194448277.png"
alt="image-20220422194448277" />
<figcaption aria-hidden="true">image-20220422194448277</figcaption>
</figure>
<p>此时对应指令fact+19位置</p>
<p>此时再使用一次单步步入,进入循环,<code>line 12:result*=n</code></p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422194622378.png"
alt="image-20220422194622378" />
<figcaption aria-hidden="true">image-20220422194622378</figcaption>
</figure>
<p>对应指令fact+13位置</p>
<p>即源代码的执行顺序和机器码相反</p>
<p>显然是由于刚才的fact+21的jg条件跳转满足,跳到了fact+13</p>
<p>此时使用until只是相当于step命令,因为until只会在循环的机器码层面的最大地址处才会有快速执行循环的作用</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422194902282.png"
alt="image-20220422194902282" />
<figcaption aria-hidden="true">image-20220422194902282</figcaption>
</figure>
<p>继续disas观察反汇编发现<code>line13:--n</code>对应反汇编的fact+16</p>
<p>此时再使用u</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422195028273.png"
alt="image-20220422195028273" />
<figcaption aria-hidden="true">image-20220422195028273</figcaption>
</figure>
<p>源代码层面进行循环条件判断,对应机器码层面test判断,而fact+19就是循环体在机器层面的最高地址</p>
<p>此时再使用u</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422195116698.png"
alt="image-20220422195116698" />
<figcaption aria-hidden="true">image-20220422195116698</figcaption>
</figure>
<p>直接返回了main函数,这是因为fact函数中while循环结束立刻就返回了,对应机器码</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220422195301219.png"
alt="image-20220422195301219" />
<figcaption aria-hidden="true">image-20220422195301219</figcaption>
</figure>
<p>第23行是循环外首条高于循环的地址,该条指令又是返回,因此返回了main函数</p>
<p>返回main后打印ans值发现是362880是9的阶乘,证明until指令会执行循环体剩下的部分</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/reverse/" rel="tag"># reverse</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/04/18/%E6%8A%BD%E8%B1%A1%E4%BB%A3%E6%95%B0/" rel="prev" title="抽象代数">
      <i class="fa fa-chevron-left"></i> 抽象代数
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/04/28/%E8%B0%83%E7%94%A8%E7%BA%A6%E5%AE%9A/" rel="next" title="调用约定">
      调用约定 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#gbd%E8%B0%83%E8%AF%95%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">1.</span> <span class="nav-text">gbd调试器的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8"><span class="nav-number">1.1.</span> <span class="nav-text">启动</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8gdb"><span class="nav-number">1.1.1.</span> <span class="nav-text">启动gdb</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E9%9D%99%E5%90%AF%E5%8A%A8gdb--q"><span class="nav-number">1.1.2.</span> <span class="nav-text">安静启动gdb -q</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E5%B1%8F%E5%90%AF%E5%8A%A8gdb--tui"><span class="nav-number">1.1.3.</span> <span class="nav-text">分屏启动gdb -tui</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E5%B1%8F%E5%AE%89%E9%9D%99%E6%8C%87%E5%AE%9A%E8%B0%83%E8%AF%95%E7%A8%8B%E5%BA%8Fgdb--tui--q-prog_name"><span class="nav-number">1.1.4.</span> <span class="nav-text">分屏+安静+指定调试程序gdb -tui -q &lt;prog_name&gt;</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%A6%E5%8F%82%E6%95%B0%E5%90%AF%E5%8A%A8--args-%E7%A8%8B%E5%BA%8F-%E5%8F%82%E6%95%B01-%E5%8F%82%E6%95%B02..."><span class="nav-number">1.1.4.1.</span> <span class="nav-text">带参数启动--args  &lt;程序&gt; &lt;参数1&gt; &lt;参数2&gt;...</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E5%90%8E%E8%BF%90%E8%A1%8C%E5%89%8D"><span class="nav-number">1.2.</span> <span class="nav-text">启动后运行前</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B7%A5%E4%BD%9C%E7%9B%AE%E5%BD%95pwd"><span class="nav-number">1.2.1.</span> <span class="nav-text">工作目录pwd</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%87%E5%AE%9A%E8%B0%83%E8%AF%95%E7%A8%8B%E5%BA%8F%E4%BD%8D%E7%BD%AEfile-prog_name"><span class="nav-number">1.2.2.</span> <span class="nav-text">指定调试程序位置file &lt;prog_name&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E4%BF%A1%E6%81%AF"><span class="nav-number">1.2.3.</span> <span class="nav-text">查看信息</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E5%B7%A5%E4%BD%9C%E7%9B%AE%E5%BD%95pwd"><span class="nav-number">1.2.3.1.</span> <span class="nav-text">查看当前工作目录pwd</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%98%AF%E5%90%A6%E6%89%BE%E5%88%B0%E7%9B%AE%E6%A0%87%E7%A8%8B%E5%BA%8F%E6%96%87%E4%BB%B6list"><span class="nav-number">1.2.3.2.</span> <span class="nav-text">查看是否找到目标程序文件list</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E8%B0%83%E8%AF%95%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80show-language"><span class="nav-number">1.2.3.3.</span> <span class="nav-text">查看调试程序语言show language</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%BA%90%E6%96%87%E4%BB%B6%E4%BF%A1%E6%81%AFinfo-source"><span class="nav-number">1.2.3.4.</span> <span class="nav-text">查看源文件信息info source</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%8F%AF%E4%BB%A5%E8%AE%BE%E7%BD%AE%E7%9A%84%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80set-language"><span class="nav-number">1.2.3.5.</span> <span class="nav-text">查看可以设置的程序语言set language</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E7%8A%B6%E6%80%81info-program"><span class="nav-number">1.2.3.6.</span> <span class="nav-text">查看程序运行状态info program</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E4%BF%A1%E6%81%AF"><span class="nav-number">1.2.4.</span> <span class="nav-text">设置信息</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0set-args-%E5%8F%82%E6%95%B01-%E5%8F%82%E6%95%B02..."><span class="nav-number">1.2.4.1.</span> <span class="nav-text">设置命令行参数set args &lt;参数1&gt; &lt;参数2&gt;...</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E8%AF%AD%E8%A8%80set-language"><span class="nav-number">1.2.4.2.</span> <span class="nav-text">设置语言&#39;set language &lt;语言&gt;&#39;</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C"><span class="nav-number">1.3.</span> <span class="nav-text">运行</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8Frun"><span class="nav-number">1.3.1.</span> <span class="nav-text">运行程序run</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%A6%E5%8F%82%E6%95%B0%E8%BF%90%E8%A1%8Crun-%E5%8F%82%E6%95%B01-%E5%8F%82%E6%95%B02..."><span class="nav-number">1.3.1.1.</span> <span class="nav-text">带参数运行run &lt;参数1&gt; &lt;参数2&gt;...</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#main%E5%81%9C%E6%AD%A2%E8%BF%90%E8%A1%8Cstart"><span class="nav-number">1.3.2.</span> <span class="nav-text">main停止运行start</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C%E6%97%B6"><span class="nav-number">1.4.</span> <span class="nav-text">运行时</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%AD%E7%82%B9"><span class="nav-number">1.4.1.</span> <span class="nav-text">断点</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E6%96%AD%E7%82%B9b-%E8%A1%8C%E5%8F%B7"><span class="nav-number">1.4.1.1.</span> <span class="nav-text">设置断点b &lt;行号&gt;</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#b-%E5%87%BD%E6%95%B0%E5%90%8D%E7%9B%B4%E6%8E%A5%E7%BB%99%E5%87%BD%E6%95%B0%E4%B8%8B%E6%96%AD%E7%82%B9"><span class="nav-number">1.4.1.1.1.</span> <span class="nav-text">b &lt;函数名&gt;直接给函数下断点</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E6%96%AD%E7%82%B9-delete-%E6%96%AD%E7%82%B9%E7%BC%96%E5%8F%B7"><span class="nav-number">1.4.1.2.</span> <span class="nav-text">删除断点
delete &lt;断点编号&gt;</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E6%8C%87%E5%AE%9A%E8%A1%8C%E4%B8%8A%E7%9A%84%E6%96%AD%E7%82%B9clear-%E8%A1%8C%E5%8F%B7"><span class="nav-number">1.4.1.2.1.</span> <span class="nav-text">删除指定行上的断点clear &lt;行号&gt;</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E6%96%AD%E7%82%B9b-if-%E6%9D%A1%E4%BB%B6"><span class="nav-number">1.4.1.3.</span> <span class="nav-text">条件断点b if &lt;条件&gt;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%96%AD%E7%82%B9%E4%BF%A1%E6%81%AFinfo-b-%E6%96%AD%E7%82%B9%E5%8F%B7"><span class="nav-number">1.4.1.4.</span> <span class="nav-text">查看断点信息info b &lt;断点号&gt;</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#info-b%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E6%96%AD%E7%82%B9%E4%BF%A1%E6%81%AF"><span class="nav-number">1.4.1.4.1.</span> <span class="nav-text">info b查看所有断点信息</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E4%BF%A1%E6%81%AF-1"><span class="nav-number">1.4.2.</span> <span class="nav-text">查看信息</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#print%E5%91%BD%E4%BB%A4"><span class="nav-number">1.4.2.1.</span> <span class="nav-text">print命令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%87%BD%E6%95%B0%E4%BF%A1%E6%81%AFp-%E5%87%BD%E6%95%B0%E5%90%8D"><span class="nav-number">1.4.2.1.1.</span> <span class="nav-text">查看函数信息p &lt;函数名&gt;</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%8F%98%E9%87%8F%E4%BF%A1%E6%81%AFp-%E5%8F%98%E9%87%8F%E5%90%8D"><span class="nav-number">1.4.2.1.2.</span> <span class="nav-text">查看变量信息p &lt;变量名&gt;</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%AF%84%E5%AD%98%E5%99%A8%E4%BF%A1%E6%81%AFp-%E5%AF%84%E5%AD%98%E5%99%A8%E5%90%8D"><span class="nav-number">1.4.2.1.3.</span> <span class="nav-text">查看寄存器信息p $&lt;寄存器名&gt;</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#x-%E6%A3%80%E6%9F%A5%E5%AD%97%E8%8A%82%E6%88%96%E8%80%85%E5%AD%97"><span class="nav-number">1.4.2.2.</span> <span class="nav-text">x&#x2F;&lt;大小&gt; &lt;位置&gt;检查字节或者字</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#x20b-fact%E6%A3%80%E6%9F%A5fact%E5%87%BD%E6%95%B0%E7%9A%84%E5%89%8D20%E4%B8%AA%E5%AD%97%E8%8A%82"><span class="nav-number">1.4.2.2.1.</span> <span class="nav-text">x&#x2F;20b fact检查fact函数的前20个字节</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#x2g-0x555555555139-%E6%A3%80%E6%9F%A5%E4%BB%8E0x555555555139%E5%9C%B0%E5%9D%80%E5%BC%80%E5%A7%8B%E7%9A%84%E5%8F%8C%E5%AD%97"><span class="nav-number">1.4.2.2.2.</span> <span class="nav-text">x&#x2F;2g
0x555555555139 检查从0x555555555139地址开始的双字</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#info%E5%91%BD%E4%BB%A4"><span class="nav-number">1.4.2.3.</span> <span class="nav-text">info命令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E5%AF%84%E5%AD%98%E5%99%A8%E4%BF%A1%E6%81%AFinfo-registers"><span class="nav-number">1.4.2.3.1.</span> <span class="nav-text">查看所有寄存器信息info registers</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%A0%88%E5%B8%A7info-frame"><span class="nav-number">1.4.2.3.2.</span> <span class="nav-text">查看栈帧&#39;info frame&#39;</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#disas%E5%91%BD%E4%BB%A4"><span class="nav-number">1.4.2.4.</span> <span class="nav-text">disas命令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8F%8D%E6%B1%87%E7%BC%96%E5%BD%93%E5%89%8D%E7%A8%8B%E5%BA%8F%E6%9A%82%E5%81%9C%E7%9A%84%E5%87%BD%E6%95%B0disas"><span class="nav-number">1.4.2.4.1.</span> <span class="nav-text">反汇编当前程序暂停的函数disas</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8F%8D%E6%B1%87%E7%BC%96%E6%8C%87%E5%AE%9A%E5%90%8D%E7%A7%B0%E7%9A%84%E5%87%BD%E6%95%B0disas-%E5%87%BD%E6%95%B0%E5%90%8D"><span class="nav-number">1.4.2.4.2.</span> <span class="nav-text">反汇编指定名称的函数disas &lt;函数名&gt;</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8F%8D%E6%B1%87%E7%BC%96%E6%9F%90%E4%B8%AA%E5%9C%B0%E5%9D%80%E9%99%84%E8%BF%91%E7%9A%84%E5%87%BD%E6%95%B0disas-%E5%9C%B0%E5%9D%80"><span class="nav-number">1.4.2.4.3.</span> <span class="nav-text">反汇编某个地址附近的函数disas &lt;地址&gt;</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%A7%E7%BB%AD%E6%89%A7%E8%A1%8C"><span class="nav-number">1.4.3.</span> <span class="nav-text">继续执行</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%BA%90%E4%BB%A3%E7%A0%81%E5%B1%82%E9%9D%A2"><span class="nav-number">1.4.3.1.</span> <span class="nav-text">源代码层面</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#next%E5%8D%95%E6%AD%A5%E6%AD%A5%E8%BF%87"><span class="nav-number">1.4.3.1.1.</span> <span class="nav-text">next单步步过</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#step%E5%8D%95%E6%AD%A5%E6%AD%A5%E5%85%A5"><span class="nav-number">1.4.3.1.2.</span> <span class="nav-text">step单步步入</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#continue%E6%89%A7%E8%A1%8C%E5%88%B0%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%96%AD%E7%82%B9"><span class="nav-number">1.4.3.1.3.</span> <span class="nav-text">continue执行到下一个断点</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#finish%E4%B8%80%E7%9B%B4%E8%BF%90%E8%A1%8C%E5%88%B0%E5%BD%93%E5%89%8D%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E"><span class="nav-number">1.4.3.1.4.</span> <span class="nav-text">finish一直运行到当前函数返回</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#return-%E6%94%BE%E5%BC%83%E5%87%BD%E6%95%B0%E6%9C%AA%E6%89%A7%E8%A1%8C%E7%9A%84%E9%83%A8%E5%88%86%E7%9B%B4%E6%8E%A5%E8%BF%94%E5%9B%9E%E5%88%B0%E8%B0%83%E7%94%A8%E8%80%85"><span class="nav-number">1.4.3.1.5.</span> <span class="nav-text">return
放弃函数未执行的部分,直接返回到调用者</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%BA%E5%99%A8%E7%A0%81%E5%B1%82%E9%9D%A2"><span class="nav-number">1.4.3.2.</span> <span class="nav-text">机器码层面</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#until-%E5%9C%A8%E5%BE%AA%E7%8E%AF%E4%BD%93%E7%9A%84%E6%9C%BA%E5%99%A8%E7%A0%81%E7%9A%84%E6%9C%80%E9%AB%98%E5%9C%B0%E5%9D%80%E6%97%B6%E6%8C%91%E5%87%BA%E5%BE%AA%E7%8E%AF%E5%88%B0%E7%AC%AC%E4%B8%80%E6%9D%A1%E9%AB%98%E4%BA%8E%E5%BE%AA%E7%8E%AF%E5%9C%B0%E5%9D%80%E7%9A%84%E6%8C%87%E4%BB%A4"><span class="nav-number">1.4.3.2.1.</span> <span class="nav-text">until
在循环体的机器码的最高地址时挑出循环到第一条高于循环地址的指令</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="dustball"
      src="https://raw.githubusercontent.com/DeutschBall/picbed/main/dustball.png">
  <p class="site-author-name" itemprop="name">dustball</p>
  <div class="site-description" itemprop="description">dustland</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">37</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">dustball</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

        
<div class="busuanzi-count">
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  
  <script data-pjax>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="//cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
<script src="//cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script>
<script src="/js/algolia-search.js"></script>












<script data-pjax>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'dark',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


    <div id="pjax">
  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

    </div>
</body>
</html>
