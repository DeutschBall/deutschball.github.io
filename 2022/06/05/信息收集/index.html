<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Cascadia Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"deutschball.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"right","width":500,"display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"万一找到了呢","hits_empty":"你说的 ${query} 我怎么找不着呢 ","hits_stats":"找到了 ${hits} 个结果，用时 ${time} 毫秒"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":-1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="今天是你的生日,但是有什么可以值得庆祝的呢?你就是一风暴兵罢了 渗透测试信息收集 域名信息收集 Whois域名信息收集 whois是一个标准互联网协议,用于收集注册域名,IP地址,自治系统信息,whois数据库中记录有该域名的DNS服务器信息和注册人的联系信息 在linux上直接用whois &lt;domain&gt;或者whois &lt;ip_addreess&gt; 使用who">
<meta property="og:type" content="article">
<meta property="og:title" content="渗透测试信息收集">
<meta property="og:url" content="http://deutschball.github.io/2022/06/05/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/index.html">
<meta property="og:site_name" content="dustland">
<meta property="og:description" content="今天是你的生日,但是有什么可以值得庆祝的呢?你就是一风暴兵罢了 渗透测试信息收集 域名信息收集 Whois域名信息收集 whois是一个标准互联网协议,用于收集注册域名,IP地址,自治系统信息,whois数据库中记录有该域名的DNS服务器信息和注册人的联系信息 在linux上直接用whois &lt;domain&gt;或者whois &lt;ip_addreess&gt; 使用who">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-06-04T16:17:00.000Z">
<meta property="article:modified_time" content="2022-07-22T13:12:58.596Z">
<meta property="article:author" content="dustball">
<meta property="article:tag" content="渗透测试">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://deutschball.github.io/2022/06/05/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>渗透测试信息收集 | dustland</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">dustland</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">dustball in dustland</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-archives">

    <a href="/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="algolia-results">
  <div id="algolia-stats"></div>
  <div id="algolia-hits"></div>
  <div id="algolia-pagination" class="algolia-pagination"></div>
</div>

      
    </div>
  </div>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/deutschball" class="github-corner" title="Follow me on GayHub" aria-label="Follow me on GayHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://deutschball.github.io/2022/06/05/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/DeutschBall/picbed/main/dustball.png">
      <meta itemprop="name" content="dustball">
      <meta itemprop="description" content="dustland">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dustland">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          渗透测试信息收集
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-06-05 00:17:00" itemprop="dateCreated datePublished" datetime="2022-06-05T00:17:00+08:00">2022-06-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-07-22 21:12:58" itemprop="dateModified" datetime="2022-07-22T21:12:58+08:00">2022-07-22</time>
              </span>

          
            <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>今天是你的生日,但是有什么可以值得庆祝的呢?你就是一风暴兵罢了</p>
<h1 id="渗透测试信息收集">渗透测试信息收集</h1>
<h2 id="域名信息收集">域名信息收集</h2>
<h3 id="whois域名信息收集">Whois域名信息收集</h3>
<p>whois是一个标准互联网协议,用于收集注册域名,IP地址,自治系统信息,whois数据库中记录有该域名的DNS服务器信息和注册人的联系信息</p>
<p>在linux上直接用<code>whois &lt;domain&gt;</code>或者<code>whois &lt;ip_addreess&gt;</code></p>
<p>使用<code>whois --help</code>可以查看帮助</p>
<p>比如:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali]</span><br><span class="line">└─# whois baidu.com</span><br><span class="line">   Domain Name: BAIDU.COM</span><br><span class="line">   Registry Domain ID: 11181110_DOMAIN_COM-VRSN</span><br><span class="line">   Registrar WHOIS Server: whois.markmonitor.com</span><br><span class="line">   Registrar URL: http://www.markmonitor.com</span><br><span class="line">   Updated Date: 2022-01-25T09:00:46Z</span><br><span class="line">   Creation Date: 1999-10-11T11:05:17Z</span><br><span class="line">   Registry Expiry Date: 2026-10-11T11:05:17Z</span><br><span class="line">   Registrar: MarkMonitor Inc.</span><br><span class="line">   Registrar IANA ID: 292</span><br><span class="line">   Registrar Abuse Contact Email: abusecomplaints@markmonitor.com</span><br><span class="line">   Registrar Abuse Contact Phone: +1.2086851750</span><br><span class="line">   Domain Status: clientDeleteProhibited https://icann.org/epp#clientDeleteProhibited</span><br><span class="line">   Domain Status: clientTransferProhibited https://icann.org/epp#clientTransferProhibited</span><br><span class="line">   Domain Status: clientUpdateProhibited https://icann.org/epp#clientUpdateProhibited</span><br><span class="line">   Domain Status: serverDeleteProhibited https://icann.org/epp#serverDeleteProhibited</span><br><span class="line">   Domain Status: serverTransferProhibited https://icann.org/epp#serverTransferProhibited</span><br><span class="line">   Domain Status: serverUpdateProhibited https://icann.org/epp#serverUpdateProhibited</span><br><span class="line">   Name Server: NS1.BAIDU.COM</span><br><span class="line">   Name Server: NS2.BAIDU.COM</span><br><span class="line">   Name Server: NS3.BAIDU.COM</span><br><span class="line">   Name Server: NS4.BAIDU.COM</span><br><span class="line">   Name Server: NS7.BAIDU.COM</span><br><span class="line">   DNSSEC: unsigned</span><br></pre></td></tr></table></figure>
<figure>
<img
src="../AppData/Roaming/Typora/typora-user-images/image-20220603174503238.png"
alt="image-20220603174503238" />
<figcaption aria-hidden="true">image-20220603174503238</figcaption>
</figure>
<p>在windows上不能使用whois命令,但是可以去站长之家或者爱站网查询</p>
<p><a target="_blank" rel="noopener" href="https://www.chinaz.com/">站长之家</a></p>
<p><a target="_blank" rel="noopener" href="https://www.aizhan.com/">站长工具-爱站网</a></p>
<h3 id="子域名信息收集">子域名信息收集</h3>
<h4 id="搜索引擎方法">搜索引擎方法</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">site:&lt;domain&gt;</span><br><span class="line">e.g.</span><br><span class="line">site:dustball.top</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220603174616042.png"
alt="image-20220603174616042" />
<figcaption aria-hidden="true">image-20220603174616042</figcaption>
</figure>
<h4 id="爬虫方法">爬虫方法</h4>
<p>burpsuite add new scan</p>
<p>比如爬某个学校的物理实验网站</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220603222904097.png"
alt="image-20220603222904097" />
<figcaption aria-hidden="true">image-20220603222904097</figcaption>
</figure>
<h4 id="子域名查询网站">子域名查询网站</h4>
<p>爱站网</p>
<p>站长之家</p>
<p>比如查询某<del>H</del>电影的网站</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220603223504262.png"
alt="image-20220603223504262" />
<figcaption aria-hidden="true">image-20220603223504262</figcaption>
</figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220603223604889.png"
alt="image-20220603223604889" />
<figcaption aria-hidden="true">image-20220603223604889</figcaption>
</figure>
<p>他木有子域名</p>
<h4 id="本地工具">本地工具</h4>
<h5 id="layer子域名挖掘机">Layer子域名挖掘机</h5>
<p>windows上的子域名挖掘工具</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220603223947457.png"
alt="image-20220603223947457" />
<figcaption aria-hidden="true">image-20220603223947457</figcaption>
</figure>
<h5 id="wydomain">wydomain</h5>
<p>linux上的工具</p>
<h4 id="备案号查询">备案号查询</h4>
<h4 id="ssl证书查询">SSL证书查询</h4>
<h4 id="crossdomain.xml文件">crossdomain.xml文件</h4>
<p>比如<code>https://www.baidu.com/crossdomain.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">This XML file does not appear to have any style information associated with it. The document tree is shown below.</span><br><span class="line"><span class="tag">&lt;<span class="name">cross-domain-policy</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">allow-access-from</span> <span class="attr">domain</span>=<span class="string">&quot;*.baidu.com&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">allow-access-from</span> <span class="attr">domain</span>=<span class="string">&quot;*.bdstatic.com&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">allow-http-request-headers-from</span> <span class="attr">domain</span>=<span class="string">&quot;*.baidu.com&quot;</span> <span class="attr">headers</span>=<span class="string">&quot;*&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">allow-http-request-headers-from</span> <span class="attr">domain</span>=<span class="string">&quot;*.bdstatic.com&quot;</span> <span class="attr">headers</span>=<span class="string">&quot;*&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">cross-domain-policy</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="dns信息收集">DNS信息收集</h3>
<h4 id="dns记录类型">DNS记录类型</h4>
<p>DNS数据库是一个分布式数据库,每一台DNS服务器都存储了一些资源记录,作用是记录域名到IP地址的映射</p>
<p>资源记录是一个四元组<code>(Name,Value,Type,TTL)</code></p>
<p>其中TTL是该条记录的生存时间,决定了资源记录应当从DNS服务器缓存中删除的时间</p>
<p>Type决定了记录的类型,Name和Value的意义都视Type而定</p>
<h5 id="typea">Type=A</h5>
<p>Name=主机名</p>
<p>Value=该主机名对应的IP地址</p>
<p>A类记录提供了标准的域名到IP的映射</p>
<blockquote>
<p>比如<code>(deutschball.github.io,185.199.109.153,A)</code></p>
</blockquote>
<p>显然这个记录应该由权威DNS服务器存储,当然其他各级DNS服务器都可以缓存,但是最终来源是权威DNS服务器.</p>
<p>Value指向的就是一台终端</p>
<h5 id="typens">Type=NS</h5>
<p>Name=域</p>
<p>Value=该域中一台权威DNS服务器的主机名</p>
<blockquote>
<p>权威DNS服务器:管理本域中的计算机IP和名称的映射.其作用类似于一个排的排长,其他计算机类似于班里的士兵,当其他班的士兵要找本班的许三多时,要先去找史班长问哪一个是许三多</p>
</blockquote>
<p>这种记录的作用是路由DNS查询,啥意思呢?</p>
<p>比如<code>(baidu.com,dns.baidu.com,NS)</code></p>
<p>在用户需要解析<code>baidu.com</code>时请求发往<code>baidu.com</code>域,然后这个域控(可能是域控?)会将该请求交给本域的DNS权威服务器<code>dns.baidu.com</code>去解析</p>
<h5 id="typecname">Type=CNAME</h5>
<p>Value是规范主机名,Name是该主机的别名</p>
<p>这个在搭建博客买域名的时候遇见过</p>
<p>本来的博客dns地址是<code>deutschball.github.io</code>,买了一个域名<code>dustball.top</code>,</p>
<p>在域名解析的时候并没有将<code>dustball.top</code>和<code>ip</code>地址直接挂钩,</p>
<p>而是增加了一条CNAME记录,将<code>dustball.top</code>和<code>deutschball.github.io</code>挂钩</p>
<p>实际解析成IP地址还是得指望原名和IP的A记录</p>
<h5 id="typemx">Type=MX</h5>
<p>Name=邮件服务器别名</p>
<p>Value=邮件服务器本名</p>
<p>MX记录允许邮件服务器具有简单的别名,通常是和web服务器同名,比如:</p>
<p><code>dustbal@mail.qq.com</code>写成<code>dustbal@qq.com</code>实际上是一个地址</p>
<p>MX的作用和CNAME类似,但是为了获得邮件服务器的规范主机名就是得用MX记录,其他服务器的规范主机名用CNAME记录</p>
<h4 id="dns记录查询">DNS记录查询</h4>
<p>nslookup命令</p>
<h5 id="查询a记录">查询A记录</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nslookup &lt;域名&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿Executor)-[~]</span><br><span class="line">└─$ nslookup baidu.com</span><br><span class="line">Server:         172.28.0.1</span><br><span class="line">Address:        172.28.0.1#53</span><br><span class="line"></span><br><span class="line">Non-authoritative answer:</span><br><span class="line">Name:   baidu.com</span><br><span class="line">Address: 220.181.38.148</span><br><span class="line">Name:   baidu.com</span><br><span class="line">Address: 220.181.38.251</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>抓包观察</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220603232445678.png"
alt="image-20220603232445678" />
<figcaption aria-hidden="true">image-20220603232445678</figcaption>
</figure>
<h5 id="查询mx记录">查询MX记录</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nslookup -type=mx &lt;域名&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">┌──(root㉿Executor)-[/home/kali]</span><br><span class="line">└─# nslookup -<span class="built_in">type</span>=mx stu.xidian.edu.cn</span><br><span class="line">main parsing stu.xidian.edu.cn</span><br><span class="line">....</span><br><span class="line">Non-authoritative answer:</span><br><span class="line">printsection()</span><br><span class="line">stu.xidian.edu.cn       mail exchanger = 30 mx-edu.icoremail.net.</span><br><span class="line"></span><br><span class="line">....</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220603232844820.png"
alt="image-20220603232844820" />
<figcaption aria-hidden="true">image-20220603232844820</figcaption>
</figure>
<h5 id="查询nx记录">查询NX记录</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nslookup -type=nx &lt;域名&gt;</span><br></pre></td></tr></table></figure>
<h5 id="查询所有类型">查询所有类型</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nslookup -type=any &lt;域名&gt;</span><br></pre></td></tr></table></figure>
<h5 id="交互模式">交互模式</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nslookup</span><br></pre></td></tr></table></figure>
<h3 id="搜索引擎利用">搜索引擎利用</h3>
<h4 id="基本搜索">基本搜索</h4>
<h5 id="逻辑与and">逻辑与AND</h5>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220603235155842.png"
alt="image-20220603235155842" />
<figcaption aria-hidden="true">image-20220603235155842</figcaption>
</figure>
<h5 id="逻辑或">逻辑或</h5>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220603235313124.png"
alt="image-20220603235313124" />
<figcaption aria-hidden="true">image-20220603235313124</figcaption>
</figure>
<h5 id="逻辑非">逻辑非</h5>
<p>如果搜索"调用约定"时</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220603235450822.png"
alt="image-20220603235450822" />
<figcaption aria-hidden="true">image-20220603235450822</figcaption>
</figure>
<p>不想看到CSDN的结果</p>
<p><code>调用约定 -csdn</code></p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220603235527399.png"
alt="image-20220603235527399" />
<figcaption aria-hidden="true">image-20220603235527399</figcaption>
</figure>
<h5 id="通配">通配</h5>
<p>使用通配符*</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220603235720991.png"
alt="image-20220603235720991" />
<figcaption aria-hidden="true">image-20220603235720991</figcaption>
</figure>
<h4 id="进阶用法">进阶用法</h4>
<h5 id="限定站点范围">限定站点范围</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">site:&lt;站点&gt;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220603235947419.png"
alt="image-20220603235947419" />
<figcaption aria-hidden="true">image-20220603235947419</figcaption>
</figure>
<h5 id="标题含有关键词">标题含有关键词</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">intitle &quot;&lt;keyword&gt;&quot;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604000132277.png"
alt="image-20220604000132277" />
<figcaption aria-hidden="true">image-20220604000132277</figcaption>
</figure>
<h5 id="标题含有多组关键词">标题含有多组关键词</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">allintitle &lt;keyword1&gt; &lt;keyword2&gt;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604000632480.png"
alt="image-20220604000632480" />
<figcaption aria-hidden="true">image-20220604000632480</figcaption>
</figure>
<h5 id="所有链接到某个url地址的网页">所有链接到某个URL地址的网页</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">link: &lt;域名&gt;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604000822823.png"
alt="image-20220604000822823" />
<figcaption aria-hidden="true">image-20220604000822823</figcaption>
</figure>
<h5 id="含有关键字的url地址">含有关键字的url地址</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">inurl: &lt;keyword&gt;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604001059596.png"
alt="image-20220604001059596" />
<figcaption aria-hidden="true">image-20220604001059596</figcaption>
</figure>
<h5 id="特定拓展名文件">特定拓展名文件</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filetype: &lt;ex_name&gt;</span><br></pre></td></tr></table></figure>
<h4 id="配合应用">配合应用</h4>
<p>在某网站下搜索含有某关键字标题的页面</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604001749976.png"
alt="image-20220604001749976" />
<figcaption aria-hidden="true">image-20220604001749976</figcaption>
</figure>
<h2 id="主机信息收集">主机信息收集</h2>
<p>1.主机开放的端口和服务</p>
<p>2.主机操作系统</p>
<p>常见端口及对应服务</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604095959880.png"
alt="image-20220604095959880" />
<figcaption aria-hidden="true">image-20220604095959880</figcaption>
</figure>
<h4 id="nmap">nmap</h4>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604100037232.png"
alt="image-20220604100037232" />
<figcaption aria-hidden="true">image-20220604100037232</figcaption>
</figure>
<p>命令行运行:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">┌──(root㉿Executor)-[/home/kali]</span><br><span class="line">└─# nmap 192.168.43.44</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-04 10:01 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> Executor (192.168.43.44)</span><br><span class="line">Host is up (0.00058s latency).</span><br><span class="line">Not shown: 996 filtered tcp ports (no-response)</span><br><span class="line">PORT    STATE SERVICE</span><br><span class="line">80/tcp  open  http</span><br><span class="line">135/tcp open  msrpc</span><br><span class="line">139/tcp open  netbios-ssn</span><br><span class="line">445/tcp open  microsoft-ds</span><br><span class="line"></span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 5.04 seconds</span><br></pre></td></tr></table></figure>
<p>GUI运行</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604100256337.png"
alt="image-20220604100256337" />
<figcaption aria-hidden="true">image-20220604100256337</figcaption>
</figure>
<p>基本用法</p>
<p><code>nmap -T4 -A -v 192.168.43.44</code></p>
<blockquote>
<p>-A:进攻性方式扫描</p>
<p>-T4:T后面的数字越大,扫描速度越快,越容易被防火墙发现.默认为-T4选项</p>
<p>-v:详细输出扫描情况,显示扫描细节</p>
</blockquote>
<h5 id="主机发现">主机发现</h5>
<h5
id="sl列出将要扫描的ip地址但是不进行主机发现"><code>-sL</code>列出将要扫描的IP地址,但是不进行主机发现</h5>
<p>比如已经写好了一个<code>list.txt</code>作为待扫描的ip地址集合,使用<code>-sL -iL list.txt</code>列出该集合</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# <span class="built_in">cat</span> list.txt</span><br><span class="line">192.168.43.44</span><br><span class="line">192.168.43.1</span><br><span class="line">192.168.43.2</span><br><span class="line"></span><br><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# nmap -sL -iL list.txt</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-04 10:08 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> Executor (192.168.43.44)</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.43.1</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.43.2</span><br><span class="line">Nmap <span class="keyword">done</span>: 3 IP addresses (0 hosts up) scanned <span class="keyword">in</span> 1.30 seconds</span><br></pre></td></tr></table></figure>
<h5
id="sn-sp只进行主机发现不进行端口扫描"><code>-sn/-sP</code>只进行主机发现,不进行端口扫描</h5>
<p><code>192.168.43.1</code>是手机热点的ip地址,</p>
<p><code>192.168.43.44</code>是本机<code>Executor</code>的ip地址</p>
<p><code>192.168.43.2</code>是杜撰的一个ip地址</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# nmap -sn -iL list.txt</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-04 10:10 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> Executor (192.168.43.44)</span><br><span class="line">Host is up (0.00032s latency).</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.43.1</span><br><span class="line">Host is up (0.019s latency).</span><br><span class="line">Nmap <span class="keyword">done</span>: 3 IP addresses (2 hosts up) scanned <span class="keyword">in</span> 2.54 seconds</span><br></pre></td></tr></table></figure>
<p>运行结果显示<code>192.168.43.1</code>和<code>192.168.43.44</code>在线,<code>192.168.43.2</code>不在线</p>
<blockquote>
<p>如果不使用<code>-sn</code>选项,nmap首先进行主机发现,然后进行端口扫描</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# nmap  -iL list.txt</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-04 10:12 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> Executor (192.168.43.44)</span><br><span class="line">Host is up (0.00044s latency).</span><br><span class="line">Not shown: 996 filtered tcp ports (no-response)</span><br><span class="line">PORT    STATE SERVICE</span><br><span class="line">80/tcp  open  http</span><br><span class="line">135/tcp open  msrpc</span><br><span class="line">139/tcp open  netbios-ssn</span><br><span class="line">445/tcp open  microsoft-ds</span><br><span class="line"></span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.43.1</span><br><span class="line">Host is up (0.014s latency).</span><br><span class="line">Not shown: 999 closed tcp ports (reset)</span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">53/tcp open  domain</span><br><span class="line"></span><br><span class="line">Nmap <span class="keyword">done</span>: 3 IP addresses (2 hosts up) scanned <span class="keyword">in</span> 7.13 seconds</span><br></pre></td></tr></table></figure>
</blockquote>
<h5
id="pn认为主机都存活直接端口扫描"><code>-Pn</code>认为主机都存活,直接端口扫描</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# nmap  -Pn -iL list.txt</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-04 10:13 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> Executor (192.168.43.44)</span><br><span class="line">Host is up (0.00029s latency).</span><br><span class="line">Not shown: 996 filtered tcp ports (no-response)</span><br><span class="line">PORT    STATE SERVICE</span><br><span class="line">80/tcp  open  http</span><br><span class="line">135/tcp open  msrpc</span><br><span class="line">139/tcp open  netbios-ssn</span><br><span class="line">445/tcp open  microsoft-ds</span><br><span class="line"></span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.43.1</span><br><span class="line">Host is up (0.0063s latency).</span><br><span class="line">Not shown: 999 closed tcp ports (reset)</span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">53/tcp open  domain</span><br><span class="line"></span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.43.2</span><br><span class="line">Host is up (0.060s latency).		<span class="comment">#这里&quot;host is up&quot;是-Pn选项的作用,让nmap认为它在线,但是没有找到任何打开的端口</span></span><br><span class="line">All 1000 scanned ports on 192.168.43.2 are <span class="keyword">in</span> ignored states.</span><br><span class="line">Not shown: 996 filtered tcp ports (no-response), 4 filtered tcp ports (host-unreach)</span><br><span class="line"></span><br><span class="line">Nmap <span class="keyword">done</span>: 3 IP addresses (3 hosts up) scanned <span class="keyword">in</span> 14.64 seconds</span><br></pre></td></tr></table></figure>
<h5
id="pspapupy使用各种协议方式进行扫描"><code>-PS/PA/PU/PY</code>使用各种协议方式进行扫描</h5>
<p>如果不指定这四个之一,则默认使用TCP和ICMP两种方式分别进行主机发现</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# nmap  -sn -iL list.txt</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-04 10:50 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> Executor (192.168.43.44)</span><br><span class="line">Host is up (0.00034s latency).</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.43.1</span><br><span class="line">Host is up (0.0054s latency).</span><br><span class="line">Nmap <span class="keyword">done</span>: 3 IP addresses (2 hosts up) scanned <span class="keyword">in</span> 2.55 seconds</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604105103155.png"
alt="image-20220604105103155" />
<figcaption aria-hidden="true">image-20220604105103155</figcaption>
</figure>
<h6 id="ps使用tcp-syn方式进行主机发现"><code>-PS</code>使用TCP
SYN方式进行主机发现</h6>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# nmap -PS -sn -iL list.txt</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-04 10:16 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> Executor (192.168.43.44)</span><br><span class="line">Host is up (0.00051s latency).</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.43.1</span><br><span class="line">Host is up (0.0080s latency).</span><br><span class="line">Nmap <span class="keyword">done</span>: 3 IP addresses (2 hosts up) scanned <span class="keyword">in</span> 1.51 seconds</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604101822988.png"
alt="image-20220604101822988" />
<figcaption aria-hidden="true">image-20220604101822988</figcaption>
</figure>
<blockquote>
<p>运行nmap的wsl kali linux的ip地址是</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# ifconfig</span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 172.28.30.195  netmask 255.255.240.0  broadcast 172.28.31.255</span><br><span class="line">        inet6 fe80::215:5dff:feeb:45a2  prefixlen 64  scopeid 0x20&lt;<span class="built_in">link</span>&gt;</span><br><span class="line">        ether 00:15:5d:eb:45:a2  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 2564  bytes 187120 (182.7 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 10190  bytes 598185 (584.1 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>
</blockquote>
<p>No.1由kali发往192.168.43.2,使用TCP协议的SYN包</p>
<p>No.2由kali发往192.168.43.44,使用TCP协议的SYN包</p>
<p>No.3由kali发往192.168.43.1,使用TCP协议的SYN包</p>
<p>No.4由192.168.43.44发往kali,使用TCP协议SYN,ACK包,kali只要收到该包就知道,129.168.43.44是存活的</p>
<p>No.5由kali发往192.168.43.44,使用TCP协议RST包,kali的主机发现目的已经达到,不再根192.168.43.44胡诌八扯,直接断开连接</p>
<blockquote>
<p>RST标志位</p>
<p>RST表示复位，用来<strong>异常的关闭连接</strong>，在TCP的设计中它是不可或缺的。就像上面说的一样，发送RST包关闭连接时，不必等缓冲区的包都发出去（不像上面的FIN包），直接就丢弃缓存区的包发送RST包。而接收端收到RST包后，也不必发送ACK包来确认。</p>
<p>TCP处理程序会在自己认为的异常时刻发送RST包。例如，A向B发起连接，但B之上并未监听相应的端口，这时B操作系统上的TCP处理程序会发RST包。</p>
<p>又比如，AB正常建立连接了，正在通讯时，A向B发送了FIN包要求关连接，B发送ACK后，网断了，A通过若干原因放弃了这个连接（例如进程重启）。网通了后，B又开始发数据包，A收到后表示压力很大，不知道这野连接哪来的，就发了个RST包强制把连接关了，B收到后会出现connect
<a
target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=reset&amp;spm=1001.2101.3001.7020">reset</a>
by peer错误。</p>
</blockquote>
<p>No.6由192.168.43.1发往kali,使用TCP协议RST,ACK包.</p>
<blockquote>
<p>[RST,ACK]是什么含义呢?</p>
<p>在No.3kali发往192.168.43.1的SYN数据包中,目的端口是192.168.43.1:80</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604102924144.png"
alt="image-20220604102924144" />
<figcaption aria-hidden="true">image-20220604102924144</figcaption>
</figure>
<p>但是前面我们已经扫描过了,192.168.43.1并未开放该端口</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-04 10:27 中国标准时间</span><br><span class="line"></span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.43.1</span><br><span class="line"></span><br><span class="line">Host is up (0.011s latency).</span><br><span class="line"></span><br><span class="line">Not shown: 999 closed tcp ports (reset)</span><br><span class="line"></span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line"></span><br><span class="line">53/tcp open  domain</span><br><span class="line"></span><br><span class="line">MAC Address: 92:74:8B:ED:5E:D6 (Unknown)</span><br><span class="line"></span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 1.43 seconds</span><br></pre></td></tr></table></figure>
<p>于是No.6的意思就是,192.168.43.1对kali说:"你说的话我听见了(收到No.3),但是我听不懂(未开放No.3的目的端口)"</p>
<p>但是kali nmap不管这么多,kali
nmap就是想知道192.168.43.1是死是活,即使是一个听不懂话的白痴,也是一个活着的,只要有回复,不管回复的啥都视为或者</p>
</blockquote>
<p>kali始终没有收到192.168.43.2,nmap认为它不存在或者已经死了</p>
<h6
id="pa使用tcp协议ack包进行主机发现"><code>-PA</code>使用TCP协议ACK包进行主机发现</h6>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# nmap -PA -sn -iL list.txt</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-04 10:33 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.43.1</span><br><span class="line">Host is up (0.010s latency).</span><br><span class="line">Nmap <span class="keyword">done</span>: 3 IP addresses (1 host up) scanned <span class="keyword">in</span> 1.50 seconds</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604103434323.png"
alt="image-20220604103434323" />
<figcaption aria-hidden="true">image-20220604103434323</figcaption>
</figure>
<p>No.201~No.203,kali向三个ip地址都发送了一个ACK包,</p>
<p>No.204,kali收到了192.168.43.1的回复,回复使用的是TCP协议RST包,意思是192.168.43.1只回了一个收到,但是不想进一步连接</p>
<p>然后No.205,No.206是kali对另外两个IP地址重复发送了ACK包,确保未收到它俩的信息不是路上的问题.</p>
<p>结果kali仍未收到它俩的回复,因此认为它俩不存在或者已死亡</p>
<blockquote>
<p>但是192.168.43.44是或者的,为啥他不应答呢?</p>
<p>一些操作系统对于不规范的TCP连接请求会直接忽略,比如192.168.43.44上的</p>
<p>一些操作系统对于不规范的TCP连接会敷衍一下但是不建立连接,比如192.168.43.1上的</p>
</blockquote>
<h6
id="pu使用udp协议进行主机发现"><code>-PU</code>使用UDP协议进行主机发现</h6>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# nmap -PU -sn -iL list.txt</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-04 10:39 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> Executor (192.168.43.44)</span><br><span class="line">Host is up (0.00039s latency).</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.43.1</span><br><span class="line">Host is up (0.096s latency).</span><br><span class="line">Nmap <span class="keyword">done</span>: 3 IP addresses (2 hosts up) scanned <span class="keyword">in</span> 1.64 seconds</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604104140787.png"
alt="image-20220604104140787" />
<figcaption aria-hidden="true">image-20220604104140787</figcaption>
</figure>
<p>No.275~No.277,kali向三个ip地址发送了UDP数据报</p>
<p>No.278,No.279,两个目标ip使用ICMP数据报回复,但是192.168.43.2没有回复</p>
<p>NO.280kali向192.168.43.2再次询问"小老弟你怎么回事",但是仍然没有收到其答复,于是kali
nmap认为小老弟死球了</p>
<h6
id="py使用sctp协议init包进行主机发现"><code>-PY</code>使用SCTP协议INIT包进行主机发现</h6>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# nmap -PY -sn -iL list.txt</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-04 10:44 CST</span><br><span class="line">Nmap <span class="keyword">done</span>: 3 IP addresses (0 hosts up) scanned <span class="keyword">in</span> 2.17 seconds</span><br></pre></td></tr></table></figure>
<p>真的太逊了,谁也没发现</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604104524209.png"
alt="image-20220604104524209" />
<figcaption aria-hidden="true">image-20220604104524209</figcaption>
</figure>
<p>全都是kali发往其他ip的SCTP数据报,但是没有收到任何回复</p>
<h5 id="端口扫描">端口扫描</h5>
<h5 id="端口状态">端口状态</h5>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604110513885.png"
alt="image-20220604110513885" />
<figcaption aria-hidden="true">image-20220604110513885</figcaption>
</figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# nmap -p 80 -iL list.txt</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-04 11:04 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> Executor (192.168.43.44)</span><br><span class="line">Host is up (0.00031s latency).</span><br><span class="line"></span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">80/tcp open  http</span><br><span class="line"></span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.43.1</span><br><span class="line">Host is up (0.0089s latency).</span><br><span class="line"></span><br><span class="line">PORT   STATE  SERVICE</span><br><span class="line">80/tcp closed http</span><br><span class="line"></span><br><span class="line">Nmap <span class="keyword">done</span>: 3 IP addresses (2 hosts up) scanned <span class="keyword">in</span> 2.69 seconds</span><br></pre></td></tr></table></figure>
<p>本机192.168.43.44上的80端口就是open状态</p>
<p>192.168.43.1上的80端口就是close状态</p>
<h6
id="netstat--n查看本机端口状态"><code>netstat -n</code>查看本机端口状态</h6>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\Users\<span class="number">86135</span>&gt; netstat <span class="literal">-n</span></span><br><span class="line"></span><br><span class="line">活动连接</span><br><span class="line"></span><br><span class="line">  协议  本地地址          外部地址        状态</span><br><span class="line">  TCP    <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">28825</span>        <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">54530</span>        ESTABLISHED</span><br><span class="line">  TCP    <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">28826</span>        <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">28827</span>        ESTABLISHED</span><br><span class="line">  TCP    <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">28827</span>        <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">28826</span>        ESTABLISHED</span><br><span class="line">  TCP    <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">54530</span>        <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">28825</span>        ESTABLISHED</span><br><span class="line">  TCP    <span class="number">192.168</span>.<span class="number">43.44</span>:<span class="number">28944</span>    <span class="number">40.90</span>.<span class="number">189.152</span>:<span class="number">443</span>      ESTABLISHED</span><br><span class="line">  TCP    <span class="number">192.168</span>.<span class="number">43.44</span>:<span class="number">29072</span>    <span class="number">103.212</span>.<span class="number">12.46</span>:<span class="number">3000</span>     ESTABLISHED</span><br><span class="line">  TCP    <span class="number">192.168</span>.<span class="number">43.44</span>:<span class="number">29910</span>    <span class="number">61.150</span>.<span class="number">43.81</span>:<span class="number">443</span>       CLOSE_WAIT</span><br><span class="line">  ....</span><br></pre></td></tr></table></figure>
<h5 id="不指定参数">不指定参数</h5>
<p>默认扫描端口<code>1~1024</code>加上<code>nmap_services</code>中列出的端口</p>
<p><code>nmap_services</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">tcpmux	1/tcp	0.001995	<span class="comment"># TCP Port Service Multiplexer [rfc-1078] | TCP Port Service Multiplexer</span></span><br><span class="line">tcpmux	1/udp	0.001236	<span class="comment"># TCP Port Service Multiplexer</span></span><br><span class="line">compressnet	2/tcp	0.000013	<span class="comment"># Management Utility</span></span><br><span class="line">compressnet	2/udp	0.001845	<span class="comment"># Management Utility</span></span><br><span class="line">compressnet	3/tcp	0.001242	<span class="comment"># Compression Process</span></span><br><span class="line">compressnet	3/udp	0.001532	<span class="comment"># Compression Process</span></span><br><span class="line">unknown	4/tcp	0.000477</span><br><span class="line">rje	5/tcp	0.000000	<span class="comment"># Remote Job Entry</span></span><br><span class="line">rje	5/udp	0.000593	<span class="comment"># Remote Job Entry</span></span><br><span class="line">unknown	6/tcp	0.000502</span><br><span class="line"><span class="built_in">echo</span>	7/sctp	0.000000</span><br><span class="line"><span class="built_in">echo</span>	7/tcp	0.004855</span><br><span class="line"><span class="built_in">echo</span>	7/udp	0.024679</span><br><span class="line">unknown	8/tcp	0.000013</span><br><span class="line">discard	9/sctp	0.000000	<span class="comment"># sink null</span></span><br><span class="line">discard	9/tcp	0.003764	<span class="comment"># sink null</span></span><br><span class="line">discard	9/udp	0.015733	<span class="comment"># sink null</span></span><br><span class="line">unknown	10/tcp	0.000063</span><br><span class="line">systat	11/tcp	0.000075	<span class="comment"># Active Users</span></span><br><span class="line">systat	11/udp	0.000577	<span class="comment"># Active Users</span></span><br><span class="line">unknown	12/tcp	0.000063</span><br><span class="line">daytime	13/tcp	0.003927</span><br><span class="line">daytime	13/udp	0.004827</span><br><span class="line">unknown	14/tcp	0.000038</span><br><span class="line">netstat	15/tcp	0.000038</span><br><span class="line">unknown	16/tcp	0.000050</span><br><span class="line">qotd	17/tcp	0.002346	<span class="comment"># Quote of the Day</span></span><br><span class="line">qotd	17/udp	0.009209	<span class="comment"># Quote of the Day</span></span><br><span class="line">msp	18/tcp	0.000000	<span class="comment"># Message Send Protocol | Message Send Protocol (historic)</span></span><br><span class="line">msp	18/udp	0.000610	<span class="comment"># Message Send Protocol</span></span><br><span class="line">chargen	19/tcp	0.002559	<span class="comment"># ttytst source Character Generator | Character Generator</span></span><br><span class="line">chargen	19/udp	0.015865	<span class="comment"># ttytst source Character Generator</span></span><br><span class="line">ftp-data	20/sctp	0.000000	<span class="comment"># File Transfer [Default Data] | FTP</span></span><br><span class="line">ftp-data	20/tcp	0.001079	<span class="comment"># File Transfer [Default Data]</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# nmap -iL list.txt</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-04 11:00 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> Executor (192.168.43.44)</span><br><span class="line">Host is up (0.00025s latency).</span><br><span class="line">Not shown: 994 closed tcp ports (reset)</span><br><span class="line">PORT    STATE SERVICE</span><br><span class="line">80/tcp  open  http</span><br><span class="line">135/tcp open  msrpc</span><br><span class="line">139/tcp open  netbios-ssn</span><br><span class="line">445/tcp open  microsoft-ds</span><br><span class="line">902/tcp open  iss-realsecure</span><br><span class="line">912/tcp open  apex-mesh</span><br><span class="line"></span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.43.1</span><br><span class="line">Host is up (0.0098s latency).</span><br><span class="line">Not shown: 999 closed tcp ports (reset)</span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">53/tcp open  domain</span><br><span class="line"></span><br><span class="line">Nmap <span class="keyword">done</span>: 3 IP addresses (2 hosts up) scanned <span class="keyword">in</span> 2.94 seconds</span><br></pre></td></tr></table></figure>
<p>kali nmap对大量端口展开了轰炸</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604110122323.png"
alt="image-20220604110122323" />
<figcaption aria-hidden="true">image-20220604110122323</figcaption>
</figure>
<h5
id="p-port扫描指定端口"><code>-p &lt;port&gt;</code>扫描指定端口</h5>
<p>比如指定扫描list.txt中列出主机的80端口(http服务器端口)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# nmap -p 80 -iL list.txt</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-04 10:53 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> Executor (192.168.43.44)</span><br><span class="line">Host is up (0.00028s latency).</span><br><span class="line"></span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">80/tcp open  http</span><br><span class="line"></span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.43.1</span><br><span class="line">Host is up (0.062s latency).</span><br><span class="line"></span><br><span class="line">PORT   STATE  SERVICE</span><br><span class="line">80/tcp closed http</span><br><span class="line"></span><br><span class="line">Nmap <span class="keyword">done</span>: 3 IP addresses (2 hosts up) scanned <span class="keyword">in</span> 2.72 seconds</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604105515492.png"
alt="image-20220604105515492" />
<figcaption aria-hidden="true">image-20220604105515492</figcaption>
</figure>
<p>确实Executor上开着一个Apache服务器,但是192.168.43.1手机上没有</p>
<h5
id="f快速模式只扫描nmap-services中列出的端口"><code>-F</code>快速模式,只扫描<code>nmap-services</code>中列出的端口</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# nmap -F -iL list.txt</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-04 11:02 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> Executor (192.168.43.44)</span><br><span class="line">Host is up (0.00050s latency).</span><br><span class="line">Not shown: 96 closed tcp ports (reset)</span><br><span class="line">PORT    STATE SERVICE</span><br><span class="line">80/tcp  open  http</span><br><span class="line">135/tcp open  msrpc</span><br><span class="line">139/tcp open  netbios-ssn</span><br><span class="line">445/tcp open  microsoft-ds</span><br><span class="line"></span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.43.1</span><br><span class="line">Host is up (0.010s latency).</span><br><span class="line">Not shown: 99 closed tcp ports (reset)</span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">53/tcp open  domain</span><br><span class="line"></span><br><span class="line">Nmap <span class="keyword">done</span>: 3 IP addresses (2 hosts up) scanned <span class="keyword">in</span> 2.72 seconds</span><br></pre></td></tr></table></figure>
<p>相对于不使用命令行参数的默认扫描方式,该种方式没有扫描到</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">902/tcp open  iss-realsecure</span><br><span class="line">912/tcp open  apex-mesh</span><br></pre></td></tr></table></figure>
<h4 id="操作系统检测">操作系统检测</h4>
<p>操作系统检测是基于端口扫描的</p>
<p>如果不指定扫描端口,却进行操作系统检测,是无效的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# nmap -O -A -sn -iL list.txt</span><br><span class="line">WARNING: OS Scan is unreliable without a port scan.  You need to use a scan <span class="built_in">type</span> along with it, such as -sS, -sT, -sF, etc instead of -sn</span><br><span class="line">QUITTING!</span><br></pre></td></tr></table></figure>
<h5
id="o进行操作系统检测-a进行版本检测"><code>-O</code>进行操作系统检测,<code>-A</code>进行版本检测</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# nmap -O -A -iL list.txt</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-04 11:07 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> Executor (192.168.43.44)</span><br><span class="line">Host is up (0.00038s latency).</span><br><span class="line">Not shown: 994 closed tcp ports (reset)</span><br><span class="line">PORT    STATE SERVICE         VERSION</span><br><span class="line">80/tcp  open  http            Apache httpd 2.4.39 ((Win64) OpenSSL/<span class="number">1.1</span>.<span class="number">1</span>b mod_fcgid/<span class="number">2.3</span>.<span class="number">9</span>a mod_log_rotate/<span class="number">1.02</span>)</span><br><span class="line">|_http-server-header: Apache/<span class="number">2.4</span>.<span class="number">39</span> (Win64) OpenSSL/<span class="number">1.1</span>.<span class="number">1</span>b mod_fcgid/<span class="number">2.3</span>.<span class="number">9</span>a mod_log_rotate/<span class="number">1.02</span></span><br><span class="line">|_http-title: Site doesn&#x27;t have a title (text/html; charset=UTF-<span class="number">8</span>).</span><br><span class="line"><span class="number">135</span>/tcp open  msrpc           Microsoft Windows RPC</span><br><span class="line"><span class="number">139</span>/tcp open  netbios-ssn     Microsoft Windows netbios-ssn</span><br><span class="line"><span class="number">445</span>/tcp open  microsoft-ds?</span><br><span class="line"><span class="number">902</span>/tcp open  ssl/vmware-auth VMware Authentication Daemon <span class="number">1.10</span> (Uses VNC, SOAP)</span><br><span class="line"><span class="number">912</span>/tcp open  vmware-auth     VMware Authentication Daemon <span class="number">1.0</span> (Uses VNC, SOAP)</span><br><span class="line">No exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).</span><br><span class="line">TCP/IP fingerprint:</span><br><span class="line">OS:SCAN(V=<span class="number">7.92</span>%E=<span class="number">4</span>%D=<span class="number">6</span>/<span class="number">4</span>%OT=<span class="number">80</span>%CT=<span class="number">1</span>%CU=<span class="number">37312</span>%PV=Y%DS=<span class="number">2</span>%DC=T%G=Y%TM=<span class="number">629</span>ACC98</span><br><span class="line">OS:%P=x86_64-pc-linux-gnu)SEQ(SP=<span class="number">101</span>%GCD=<span class="number">1</span>%ISR=<span class="number">10</span>D%TI=I%CI=I%II=I%SS=S%TS=A</span><br><span class="line">OS:)OPS(O1=MFFD7NW8ST11%O2=MFFD7NW8ST11%O3=MFFD7NW8NNT11%O4=MFFD7NW8ST11%O5</span><br><span class="line">OS:=MFFD7NW8ST11%O6=MFFD7ST11)WIN(W1=FFFF%W2=FFFF%W3=FFFF%W4=FFFF%W5=FFFF%W</span><br><span class="line">OS:<span class="number">6</span>=FFDC)ECN(R=Y%DF=Y%T=<span class="number">7</span>F%W=FFFF%O=MFFD7NW8NNS%CC=N%Q=)T1(R=Y%DF=Y%T=<span class="number">7</span>F%S</span><br><span class="line">OS:=O%A=S+%F=AS%RD=<span class="number">0</span>%Q=)T2(R=Y%DF=Y%T=<span class="number">7</span>F%W=<span class="number">0</span>%S=Z%A=S%F=AR%O=%RD=<span class="number">0</span>%Q=)T3(R=Y</span><br><span class="line">OS:%DF=Y%T=<span class="number">7</span>F%W=<span class="number">0</span>%S=Z%A=O%F=AR%O=%RD=<span class="number">0</span>%Q=)T4(R=Y%DF=Y%T=<span class="number">7</span>F%W=<span class="number">0</span>%S=A%A=O%F=R%</span><br><span class="line">OS:O=%RD=<span class="number">0</span>%Q=)T5(R=Y%DF=Y%T=<span class="number">7</span>F%W=<span class="number">0</span>%S=Z%A=S+%F=AR%O=%RD=<span class="number">0</span>%Q=)T6(R=Y%DF=Y%T=<span class="number">7</span></span><br><span class="line">OS:F%W=<span class="number">0</span>%S=A%A=O%F=R%O=%RD=<span class="number">0</span>%Q=)T7(R=Y%DF=Y%T=<span class="number">7</span>F%W=<span class="number">0</span>%S=Z%A=S+%F=AR%O=%RD=<span class="number">0</span>%</span><br><span class="line">OS:Q=)U1(R=Y%DF=N%T=<span class="number">7</span>F%IPL=<span class="number">164</span>%UN=<span class="number">0</span>%RIPL=G%RID=G%RIPCK=G%RUCK=<span class="number">37</span>DE%RUD=G)IE</span><br><span class="line">OS:(R=Y%DFI=N%T=<span class="number">7</span>F%CD=Z)</span><br><span class="line"></span><br><span class="line">Network Distance: <span class="number">2</span> hops</span><br><span class="line">Service Info: OS: Windows; CPE: cpe:/o:microsoft:windows</span><br><span class="line"></span><br><span class="line">Host script results:</span><br><span class="line">| smb2-time:</span><br><span class="line">|   date: <span class="number">2022</span>-<span class="number">06</span>-<span class="number">04</span>T03:<span class="number">08</span>:<span class="number">00</span></span><br><span class="line">|_  start_date: N/A</span><br><span class="line">|_nbstat: NetBIOS name: EXECUTOR, NetBIOS user: &lt;unknown&gt;, NetBIOS MAC: <span class="number">2</span>c:<span class="number">6</span>d:c1:<span class="number">98</span>:<span class="number">7</span>d:<span class="number">03</span> (Intel Corporate)</span><br><span class="line">| smb2-security-mode:</span><br><span class="line">|   <span class="number">3.1</span>.<span class="number">1</span>:</span><br><span class="line">|_    Message signing enabled but not required</span><br><span class="line"></span><br><span class="line">TRACEROUTE (using port <span class="number">587</span>/tcp)</span><br><span class="line">HOP RTT     ADDRESS</span><br><span class="line"><span class="number">1</span>   <span class="number">0.41</span> ms Executor.mshome.net (<span class="number">172.28</span>.<span class="number">16.1</span>)</span><br><span class="line"><span class="number">2</span>   <span class="number">0.43</span> ms Executor (<span class="number">192.168</span>.<span class="number">43.44</span>)</span><br><span class="line"></span><br><span class="line">Nmap scan report for <span class="number">192.168</span>.<span class="number">43.1</span></span><br><span class="line">Host is up (<span class="number">0.0065</span>s latency).</span><br><span class="line">Not shown: <span class="number">999</span> closed tcp ports (reset)</span><br><span class="line">PORT   STATE SERVICE VERSION</span><br><span class="line"><span class="number">53</span>/tcp open  domain  dnsmasq <span class="number">2.51</span></span><br><span class="line">| dns-nsid:</span><br><span class="line">|_  bind.version: dnsmasq-<span class="number">2.51</span></span><br><span class="line">No exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).</span><br><span class="line">TCP/IP fingerprint:</span><br><span class="line">OS:SCAN(V=<span class="number">7.92</span>%E=<span class="number">4</span>%D=<span class="number">6</span>/<span class="number">4</span>%OT=<span class="number">53</span>%CT=<span class="number">1</span>%CU=<span class="number">35611</span>%PV=Y%DS=<span class="number">2</span>%DC=T%G=Y%TM=<span class="number">629</span>ACC98</span><br><span class="line">OS:%P=x86_64-pc-linux-gnu)SEQ(SP=<span class="number">103</span>%GCD=<span class="number">1</span>%ISR=<span class="number">10</span>C%TI=Z%CI=Z%II=I%TS=A)OPS(</span><br><span class="line">OS:O1=M5B4ST11NW9%O2=M5B4ST11NW9%O3=M5B4NNT11NW9%O4=M5B4ST11NW9%O5=M5B4ST11</span><br><span class="line">OS:NW9%O6=M5B4ST11)WIN(W1=FFFF%W2=FFFF%W3=FFFF%W4=FFFF%W5=FFFF%W6=FFFF)ECN(</span><br><span class="line">OS:R=Y%DF=Y%T=<span class="number">40</span>%W=FFFF%O=M5B4NNSNW9%CC=Y%Q=)T1(R=Y%DF=Y%T=<span class="number">40</span>%S=O%A=S+%F=AS</span><br><span class="line">OS:%RD=<span class="number">0</span>%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=<span class="number">40</span>%W=<span class="number">0</span>%S=A%A=Z%F=R%O=%RD=<span class="number">0</span>%Q=)T5(R=</span><br><span class="line">OS:Y%DF=Y%T=<span class="number">40</span>%W=<span class="number">0</span>%S=Z%A=S+%F=AR%O=%RD=<span class="number">0</span>%Q=)T6(R=Y%DF=Y%T=<span class="number">40</span>%W=<span class="number">0</span>%S=A%A=Z%F=</span><br><span class="line">OS:R%O=%RD=<span class="number">0</span>%Q=)T7(R=Y%DF=Y%T=<span class="number">40</span>%W=<span class="number">0</span>%S=Z%A=S+%F=AR%O=%RD=<span class="number">0</span>%Q=)U1(R=Y%DF=N%T</span><br><span class="line">OS:=<span class="number">40</span>%IPL=<span class="number">164</span>%UN=<span class="number">0</span>%RIPL=G%RID=G%RIPCK=G%RUCK=<span class="number">3</span>EAE%RUD=G)IE(R=Y%DFI=N%T=<span class="number">40</span>%</span><br><span class="line">OS:CD=S)</span><br><span class="line"></span><br><span class="line">Network Distance: <span class="number">2</span> hops</span><br><span class="line"></span><br><span class="line">TRACEROUTE (using port <span class="number">587</span>/tcp)</span><br><span class="line">HOP RTT     ADDRESS</span><br><span class="line">-   Hop <span class="number">1</span> is the same as for <span class="number">192.168</span>.<span class="number">43.44</span></span><br><span class="line"><span class="number">2</span>   <span class="number">7.82</span> ms <span class="number">192.168</span>.<span class="number">43.1</span></span><br><span class="line"></span><br><span class="line">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: <span class="number">3</span> IP addresses (<span class="number">2</span> hosts up) scanned in <span class="number">30.29</span> seconds</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>这里检测出了192.168.43.44的操作系统</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Service Info: OS: Windows; CPE: cpe:/o:microsoft:windows</span><br></pre></td></tr></table></figure>
<p>但是没有检测出192.168.43.1的操作系统</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">No exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).</span><br></pre></td></tr></table></figure>
<h5 id="其他方法">其他方法</h5>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604112513527.png"
alt="image-20220604112513527" />
<figcaption aria-hidden="true">image-20220604112513527</figcaption>
</figure>
<h3 id="masscan">masscan</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali/mydir]</span><br><span class="line">└─# masscan -p1-65535 --rate=10000 192.168.43.44</span><br><span class="line">Starting masscan 1.3.2 (http://bit.ly/14GZzcT) at 2022-06-04 03:22:19 GMT</span><br><span class="line">Initiating SYN Stealth Scan</span><br><span class="line">Scanning 1 hosts [65535 ports/host]</span><br><span class="line">Discovered open port 135/tcp on 192.168.43.44</span><br><span class="line">Discovered open port 49664/tcp on 192.168.43.44</span><br><span class="line">Discovered open port 49672/tcp on 192.168.43.44</span><br><span class="line">Discovered open port 49666/tcp on 192.168.43.44</span><br><span class="line">Discovered open port 54260/tcp on 192.168.43.44</span><br><span class="line">Discovered open port 9955/tcp on 192.168.43.44</span><br><span class="line">Discovered open port 902/tcp on 192.168.43.44</span><br><span class="line">Discovered open port 445/tcp on 192.168.43.44</span><br><span class="line">Discovered open port 49667/tcp on 192.168.43.44</span><br><span class="line">Discovered open port 5040/tcp on 192.168.43.44</span><br><span class="line">Discovered open port 49665/tcp on 192.168.43.44</span><br><span class="line">Discovered open port 912/tcp on 192.168.43.44</span><br><span class="line">Discovered open port 49669/tcp on 192.168.43.44</span><br><span class="line">Discovered open port 139/tcp on 192.168.43.44</span><br><span class="line">rate:  0.00-kpps, 100.00% <span class="keyword">done</span>, waiting 4-secs, found=14</span><br></pre></td></tr></table></figure>
<h3 id="端口漏洞利用">端口漏洞利用</h3>
<h2 id="旁站">旁站</h2>
<p>一个IP或者域名所在的服务器有可能还运行着其他网站,目标站点和旁站对应于服务器的不同端口,对应于同一WEB服务的不同路径</p>
<p>主站点难以找到漏洞时考虑从旁站入侵</p>
<p>收集信息种类:</p>
<p>1.收集旁站的 域名信息</p>
<p>注册人姓名电话邮箱,NS服务器</p>
<p>2.收集旁站的 程序信息</p>
<p>服务器及中间件</p>
<p>脚本或者使用框架</p>
<p>后台及敏感目录</p>
<p>是否存在已知漏洞</p>
<h3 id="在线网站查旁站">在线网站查旁站</h3>
<p><a target="_blank" rel="noopener" href="https://ipchaxun.com/">查旁网</a></p>
<p>从我的博客域名<code>dustball.top</code>开始查</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604120742428.png"
alt="image-20220604120742428" />
<figcaption aria-hidden="true">image-20220604120742428</figcaption>
</figure>
<p>首先查到ip地址,然后再查ip地址<code>185.199.109.153</code></p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604120923351.png"
alt="image-20220604120923351" />
<figcaption aria-hidden="true">image-20220604120923351</figcaption>
</figure>
<p>这些网站显然和博客是一个性质的,基于github page的搭建的</p>
<p>其中有一个</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604121049066.png"
alt="image-20220604121049066" />
<figcaption aria-hidden="true">image-20220604121049066</figcaption>
</figure>
<p>根据我对二刺螈的理解,这里面准有好康的</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604121151087.png"
alt="image-20220604121151087" />
<figcaption aria-hidden="true">image-20220604121151087</figcaption>
</figure>
<p>dddd</p>
<h3 id="本地工具查旁站">本地工具查旁站</h3>
<h3 id="端口查旁站">端口查旁站</h3>
<p>同一个主机是否开放了除80端口之外的http,https,http-proxy等服务</p>
<h2 id="c段">C段</h2>
<p>C段就是通过一个路由器连接的主机集合</p>
<h3 id="在线接口查询">在线接口查询</h3>
<p><a target="_blank" rel="noopener" href="https://chapangzhan.com/">查旁网</a></p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604162410662.png"
alt="image-20220604162410662" />
<figcaption aria-hidden="true">image-20220604162410662</figcaption>
</figure>
<h3 id="本地工具扫描">本地工具扫描</h3>
<h4 id="nmap扫描c段">nmap扫描C段</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali]</span><br><span class="line">└─# nmap -sP 192.168.3.0/24</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-04 16:22 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.3.1</span><br><span class="line">Host is up (0.0027s latency).</span><br><span class="line">Nmap scan report <span class="keyword">for</span> host.docker.internal (192.168.3.2)</span><br><span class="line">Host is up (0.00026s latency).</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.3.7</span><br><span class="line">Host is up (0.0060s latency).</span><br><span class="line">Nmap <span class="keyword">done</span>: 256 IP addresses (3 hosts up) scanned <span class="keyword">in</span> 5.14 seconds</span><br></pre></td></tr></table></figure>
<h4 id="iis-put-scanner">IIS Put Scanner</h4>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604162623631.png"
alt="image-20220604162623631" />
<figcaption aria-hidden="true">image-20220604162623631</figcaption>
</figure>
<h2 id="指纹识别">指纹识别</h2>
<p>啥叫指纹识别?</p>
<p>就是通过网页上留下的蛛丝马迹,识别出该网站使用哪一款CMS建站</p>
<p>比如页面底部的版权信息</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604163706007.png"
alt="image-20220604163706007" />
<figcaption aria-hidden="true">image-20220604163706007</figcaption>
</figure>
<p>或者访问不存在的页面返回的错误信息</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604192416711.png"
alt="image-20220604192416711" />
<figcaption aria-hidden="true">image-20220604192416711</figcaption>
</figure>
<blockquote>
<p>这个错误页面可以修改,不让它暴露中间件信息</p>
</blockquote>
<p>还要获取该CMS的版本信息</p>
<p>然后就可以到CMS的官网上下载源代码进行白盒测试了</p>
<p>或者目标使用的低版本CMS已经有漏洞被曝光,直接利用</p>
<p>指纹识别要收集的信息:</p>
<p>1.web服务器(中间件)类型版本</p>
<p>2.前端技术</p>
<p>3.CMS</p>
<p>4.开发语言</p>
<p>等等</p>
<h3 id="在线指纹识别">在线指纹识别</h3>
<p>比如某些企业的官网</p>
<p>尤其是乡镇上的小企业,必然没钱自己写一个网站后端,也就是请一些技术人员用现成的CMS建站吧,并且也意识不到更新的必要性</p>
<h4 id="what-cms">What CMS</h4>
<p><a target="_blank" rel="noopener" href="https://whatcms.org/">Detect which CMS a site is using -
What CMS?</a></p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604164434798.png"
alt="image-20220604164434798" />
<figcaption aria-hidden="true">image-20220604164434798</figcaption>
</figure>
<p>然而最新的wordpress已经到了6.0</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604164700687.png"
alt="image-20220604164700687" />
<figcaption aria-hidden="true">image-20220604164700687</figcaption>
</figure>
<p>然后搜索wordpress 5.0漏洞</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604164739355.png"
alt="image-20220604164739355" />
<figcaption aria-hidden="true">image-20220604164739355</figcaption>
</figure>
<p>当然4.9版本也是包含此漏洞的,这意味着什么呢?</p>
<h4 id="yunsee">yunsee</h4>
<p>需要登录才可以查</p>
<p>然而注册还要邀请码</p>
<p>屑</p>
<h3 id="本地工具-1">本地工具</h3>
<h4 id="御剑">御剑</h4>
<p>有一个挖旁站的御剑,还有一个挖指纹的御剑</p>
<p>挖指纹这个是这样工作的:</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604165921960.png"
alt="image-20220604165921960" />
<figcaption aria-hidden="true">image-20220604165921960</figcaption>
</figure>
<p>在Bin目录下面每个CMS的指纹写成一个txt文件</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> D:\web安全\御剑\御剑+加强字典+批量\Bin&gt; <span class="built_in">dir</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    目录: D:\web安全\御剑\御剑+加强字典+批量\Bin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Mode                 LastWriteTime         Length Name</span><br><span class="line"><span class="literal">----</span>                 <span class="literal">-------------</span>         <span class="literal">------</span> <span class="literal">----</span></span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">40</span>            <span class="number">530</span> aspcms.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">41</span>           <span class="number">1136</span> dedecms.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">16</span>:<span class="number">22</span>           <span class="number">1378</span> discuz.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">42</span>           <span class="number">2290</span> drupal.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">42</span>           <span class="number">1918</span> dvbbs.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">43</span>           <span class="number">1563</span> ecshop.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">43</span>            <span class="number">595</span> emlog.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">44</span>           <span class="number">1834</span> empirecms.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">45</span>            <span class="number">898</span> espcms.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">45</span>           <span class="number">1397</span> foosuncms.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">45</span>           <span class="number">1109</span> hdwiki.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">46</span>           <span class="number">1772</span> joomla.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">46</span>            <span class="number">692</span> kesioncms.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">50</span>           <span class="number">2277</span> kingcms.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">51</span>           <span class="number">1018</span> ljcms.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">51</span>            <span class="number">786</span> php168.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">52</span>           <span class="number">2468</span> phpcms.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">52</span>           <span class="number">2041</span> phpwind.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">52</span>           <span class="number">2003</span> powereasy.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">52</span>           <span class="number">1691</span> qibosoft.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">53</span>           <span class="number">1428</span> siteserver.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">53</span>            <span class="number">795</span> southidc.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">53</span>           <span class="number">1106</span> wordpress.txt</span><br><span class="line"><span class="literal">-a----</span>         <span class="number">2013</span>/<span class="number">4</span>/<span class="number">24</span>     <span class="number">15</span>:<span class="number">53</span>           <span class="number">1107</span> z<span class="literal">-blog</span>.txt</span><br></pre></td></tr></table></figure>
<p>比如<code>wordpress.txt</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#范例：链接------关键字------CMS别称</span></span><br><span class="line"><span class="comment">#范例：连接------正则表达式------匹配关键字------CMS别称</span></span><br><span class="line">/robots.txt------wordpress------WordPress</span><br><span class="line">/license.txt------wordpress------WordPress</span><br><span class="line">/readme.txt------wordpress------WordPress</span><br><span class="line">/<span class="built_in">help</span>.txt------wordpress------WordPress</span><br><span class="line">/readme.html------wordpress------WordPress</span><br><span class="line">/readme.htm------wordpress------WordPress</span><br><span class="line">/wp-admin/css/colors-classic.css------wordpress------WordPress</span><br><span class="line">/wp-admin/js/media-upload.dev.js------wordpress------WordPress</span><br><span class="line">/wp-content/plugins/akismet/akismet.js------wordpress------WordPress</span><br><span class="line">/wp-content/themes/classic/rtl.css------wordpress------WordPress</span><br><span class="line">/wp-content/themes/twentyeleven/readme.txt------wordpress------WordPress</span><br><span class="line">/wp-content/themes/twentyten/style.css------wordpress------WordPress</span><br><span class="line">/wp-includes/css/buttons.css------wordpress------WordPress</span><br><span class="line">/wp-includes/js/scriptaculous/wp-scriptaculous.js------wordpress------WordPress</span><br><span class="line">/wp-includes/js/tinymce/langs/wp-langs-en.js------wordpress------WordPress</span><br><span class="line">/wp-includes/js/tinymce/wp-tinymce.js------wordpress------WordPress</span><br><span class="line">/wp-includes/wlwmanifest.xml------wordpress------WordPress</span><br></pre></td></tr></table></figure>
<p>御剑在运行的时候会遍历每一个CMS的指纹文件的每一行,然后去该网站<code>http://www.sdtxsn.com/</code>找</p>
<p>对<code>/robots.txt------wordpress------WordPress</code>这一行</p>
<p>御剑就会尝试访问<code>http://www.sdtxsn.com/robots.txt</code>然后从里面寻找有没有wordpress字样,如果有则判定为wordpress
CMS</p>
<p>显然这样判断是很武断的,稍微做一点手脚就可以骗过御剑</p>
<p>比如本地的DVWA靶场,在其根目录下robots.txt最后写一行<code>wordpress</code></p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604170813339.png"
alt="image-20220604170813339" />
<figcaption aria-hidden="true">image-20220604170813339</figcaption>
</figure>
<p>保存之后用御剑去查</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604170832582.png"
alt="image-20220604170832582" />
<figcaption aria-hidden="true">image-20220604170832582</figcaption>
</figure>
<p>御剑检查到wordpress.txt的第一行就是<code>robots.txt</code>然后去<code>192.168.3.2/DVWA</code>查该文件,发现有<code>wordpress</code>字样,于是就武断地认为是wordpress建的站.后面的检查也不做了</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604170937466.png"
alt="image-20220604170937466" />
<figcaption aria-hidden="true">image-20220604170937466</figcaption>
</figure>
<p>要想让御剑继续检查就把wordpress.txt中关于<code>robots.txt</code>那一行注释掉</p>
<p>随着我们逐步了解更多CMS还有指纹信息,我们也可以拓展御剑的指纹字典或者新添加CMS指纹,增强御剑的功能</p>
<h4 id="whatweb">whatweb</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali]</span><br><span class="line">└─# whatweb http://www.sdtxsn.com/</span><br><span class="line">http://www.sdtxsn.com/ [200 OK] All-in-one-SEO-Pack[2.3.11.1], Country[CHINA][CN], HTML5, HTTPServer[nginx/1.4.4], IP[121.36.56.23], JQuery[1.12.4,1.8.3], Modernizr[2.7.1.min], PHP[5.4.23], Script[text/javascript], Title[山东泰西水泥有限公 司 |], UncommonHeaders[<span class="built_in">link</span>], WordPress, X-Powered-By[PHP/5.4.23], X-UA-Compatible[IE=edge], nginx[1.4.4]</span><br></pre></td></tr></table></figure>
<p>php版本,cms类型,服务器类型和版本都查到了</p>
<p>查本地的DVWA靶场</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali]</span><br><span class="line">└─# whatweb http://192.168.3.2/DVWA</span><br><span class="line">http://192.168.3.2/DVWA [301 Moved Permanently] Apache[2.4.39][mod_fcgid/2.3.9a,mod_log_rotate/1.02], Country[RESERVED][ZZ], HTTPServer[Apache/2.4.39 (Win64) OpenSSL/1.1.1b mod_fcgid/2.3.9a mod_log_rotate/1.02], IP[192.168.3.2], OpenSSL[1.1.1b], RedirectLocation[http://192.168.3.2/DVWA/], Title[301 Moved Permanently]</span><br><span class="line">http://192.168.3.2/DVWA/ [302 Found] Apache[2.4.39][mod_fcgid/2.3.9a,mod_log_rotate/1.02], Cookies[PHPSESSID,security], Country[RESERVED][ZZ], HTTPServer[Apache/2.4.39 (Win64) OpenSSL/1.1.1b mod_fcgid/2.3.9a mod_log_rotate/1.02], HttpOnly[PHPSESSID,security], IP[192.168.3.2], OpenSSL[1.1.1b], PHP[5.6.9], RedirectLocation[login.php], X-Powered-By[PHP/5.6.9]</span><br><span class="line">http://192.168.3.2/DVWA/login.php [302 Found] Apache[2.4.39][mod_fcgid/2.3.9a,mod_log_rotate/1.02], Cookies[PHPSESSID,security], Country[RESERVED][ZZ], HTTPServer[Apache/2.4.39 (Win64) OpenSSL/1.1.1b mod_fcgid/2.3.9a mod_log_rotate/1.02], HttpOnly[PHPSESSID,security], IP[192.168.3.2], OpenSSL[1.1.1b], PHP[5.6.9], RedirectLocation[setup.php], X-Powered-By[PHP/5.6.9]</span><br><span class="line">http://192.168.3.2/DVWA/setup.php [200 OK] Apache[2.4.39][mod_fcgid/2.3.9a,mod_log_rotate/1.02], Cookies[PHPSESSID,security], Country[RESERVED][ZZ], HTML5, HTTPServer[Apache/2.4.39 (Win64) OpenSSL/1.1.1b mod_fcgid/2.3.9a mod_log_rotate/1.02], HttpOnly[PHPSESSID,security], IP[192.168.3.2], OpenSSL[1.1.1b], PHP[5.6.9], Script[text/javascript], Title[Setup :: Damn Vulnerable Web Application (DVWA) v1.10 *Development*], X-Powered-By[PHP/5.6.9]</span><br></pre></td></tr></table></figure>
<p>查不到CMS信息,因为这个靶场压根就没有用CMS建站</p>
<p>但是查到了操作系统Win64,服务器中间件Apache,php版本5.6.9等信息</p>
<h3 id="操作系统指纹识别">操作系统指纹识别</h3>
<p>whatweb等工具也有操作系统指纹识别的功能</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604191222243.png"
alt="image-20220604191222243" />
<figcaption aria-hidden="true">image-20220604191222243</figcaption>
</figure>
<h4 id="curl---head-url"><code>curl --head &lt;URL&gt;</code></h4>
<p><code>curl</code>从终端上请求网页</p>
<p><code>--head</code>选项意思是返回数据包头,丢弃数据主体</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali]</span><br><span class="line">└─# curl --<span class="built_in">head</span> http://www.sdtxsn.com/</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx/1.4.4</span><br><span class="line">Date: Sat, 04 Jun 2022 11:14:07 GMT</span><br><span class="line">Content-Type: text/html; charset=UTF-8</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Vary: Accept-Encoding</span><br><span class="line">X-Powered-By: PHP/5.4.23</span><br><span class="line">Link: &lt;http://www.sdtxsn.com/?rest_route=/&gt;; rel=<span class="string">&quot;https://api.w.org/&quot;</span></span><br><span class="line">Link: &lt;http://www.sdtxsn.com/&gt;; rel=shortlink</span><br></pre></td></tr></table></figure>
<p>如果目标使用操作系统是Windows,服务器是IIS中间件则Server这里应该写Microsoft-IIS/6.0(或者7.5等等版本)</p>
<blockquote>
<p>微软的操作系统版本一般是和IIS中间件挂钩的,比如</p>
<p>WinServer2003使用的是IIS6.0</p>
<p>WinServer2008使用的是IIS7.5</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604192537532.png"
alt="image-20220604192537532" />
<figcaption aria-hidden="true">image-20220604192537532</figcaption>
</figure>
<p>win11上的IIS版本更高</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604192805045.png"
alt="image-20220604192805045" />
<figcaption aria-hidden="true">image-20220604192805045</figcaption>
</figure>
</blockquote>
<p>而现在curl的返回值是</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Server: nginx/1.4.4</span><br></pre></td></tr></table></figure>
<p>表明目标是运行在nginx中间件上的,至于是Windows系统还是Linux系统尚未可知</p>
<p>实际上用浏览器直接访问目标然后用开发者工具也可以观察到数据包头</p>
<h4 id="nmap--o--a"><code>nmap -O -A</code></h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali]</span><br><span class="line">└─# nmap -O -A 192.168.43.44</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-04 19:28 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> Executor (192.168.43.44)</span><br><span class="line">Host is up (0.00023s latency).</span><br><span class="line">Not shown: 994 closed tcp ports (reset)</span><br><span class="line">PORT    STATE SERVICE         VERSION</span><br><span class="line">80/tcp  open  http            Apache httpd 2.4.39 ((Win64) OpenSSL/<span class="number">1.1</span>.<span class="number">1</span>b mod_fcgid/<span class="number">2.3</span>.<span class="number">9</span>a mod_log_rotate/<span class="number">1.02</span>)</span><br><span class="line">|_http-title: Site doesn&#x27;t have a title (text/html; charset=UTF-<span class="number">8</span>).</span><br><span class="line">|_http-server-header: Apache/<span class="number">2.4</span>.<span class="number">39</span> (Win64) OpenSSL/<span class="number">1.1</span>.<span class="number">1</span>b mod_fcgid/<span class="number">2.3</span>.<span class="number">9</span>a mod_log_rotate/<span class="number">1.02</span></span><br><span class="line"><span class="number">135</span>/tcp open  msrpc           Microsoft Windows RPC</span><br><span class="line"><span class="number">139</span>/tcp open  netbios-ssn     Microsoft Windows netbios-ssn</span><br><span class="line"><span class="number">445</span>/tcp open  microsoft-ds?</span><br><span class="line"><span class="number">902</span>/tcp open  ssl/vmware-auth VMware Authentication Daemon <span class="number">1.10</span> (Uses VNC, SOAP)</span><br><span class="line"><span class="number">912</span>/tcp open  vmware-auth     VMware Authentication Daemon <span class="number">1.0</span> (Uses VNC, SOAP)</span><br><span class="line">No exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).</span><br><span class="line">TCP/IP fingerprint:</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">Network Distance: <span class="number">2</span> hops</span><br><span class="line">Service Info: OS: Windows; CPE: cpe:/o:microsoft:windows</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>这里多处信息表明目标<code>192.168.43.44</code>是windows操作系统</p>
<h2 id="网站路径扫描">网站路径扫描</h2>
<h3 id="原理">原理:</h3>
<p>原理就是猜测一个网站的目录有什么,尝试去访问该目录,根据返回的状态码确定其存不存在</p>
<p>比如<code>http://www.sdtxsn.com/index.html</code></p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604194452563.png"
alt="image-20220604194452563" />
<figcaption aria-hidden="true">image-20220604194452563</figcaption>
</figure>
<p>404 NotFound的意思就是压根没有这个目录</p>
<p>但是尝试访问<code>http://www.sdtxsn.com/index.php</code></p>
<p>会自动跳转到<code>http://www.sdtxsn.com</code>说明该主页就是<code>index.php</code>,本网站的后端语言就是php</p>
<p>又如猜测会有一个登录用的<code>login.php</code></p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604194700315.png"
alt="image-20220604194700315" />
<figcaption aria-hidden="true">image-20220604194700315</figcaption>
</figure>
<p>尝试访问时得到返回状态码<code>403 Forbidden</code>,说明网站目录里有这个文件,但是没有访问权限</p>
<p>使用自动化的扫站工具,其基于上述原理,使用目录字典疯狂地向服务端发送请求,然后根据http返回状态判断该目录是否存在,是否可以访问</p>
<p>为啥要扫站?</p>
<p>1.有可能有后门文件比如<code>shell.php</code>,其中一句话木马口令有可能很简单比如'cmd',这样就可以骑别人的马子</p>
<p>2.可能有些敏感文件没有妥当设置保护,能够直接访问</p>
<blockquote>
<p>robots.txt</p>
<p>后台</p>
<p>备份文件.bak,.sql,.txt,.zip,.tar,可能含有密码或者源代码</p>
<p>MySQL接口,比如phpMyAdmin</p>
<p>安装页面:建站一开始的安装页面,在建站完毕后及时删除,否则有可能导致重装</p>
<p>上传目录,通常是/upload/这种字样</p>
<p>编辑器漏洞</p>
</blockquote>
<p>3.可能有些文件的访问权限没有设置好,本应该以管理员登录才能访问,却能够通过URL直接访问,即越权漏洞</p>
<h3 id="本地自动化工具">本地自动化工具</h3>
<h4 id="御剑1.5">御剑1.5</h4>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604195203548.png"
alt="image-20220604195203548" />
<figcaption aria-hidden="true">image-20220604195203548</figcaption>
</figure>
<p>这里御剑只是扫描到了稀松了了的东西,貌似御剑不会递归目录,他只会扫描指定到目录的下一层</p>
<h4 id="burpsuite">burpsuite</h4>
<p>在dashboard上new scan,然后输入目标URL地址就可以扫站</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604195619671.png"
alt="image-20220604195619671" />
<figcaption aria-hidden="true">image-20220604195619671</figcaption>
</figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604195550098.png"
alt="image-20220604195550098" />
<figcaption aria-hidden="true">image-20220604195550098</figcaption>
</figure>
<p>这里扫描到了一个后台登录文件<code>wp-login.php</code>,御剑的字典里就没有这个文件,此时就可以将他添加到御剑的目录字典里了</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604195707350.png"
alt="image-20220604195707350" />
<figcaption aria-hidden="true">image-20220604195707350</figcaption>
</figure>
<p>后面就可以尝试暴力破解或者sql注入攻击或者社工等方式登录</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604195936171.png"
alt="image-20220604195936171" />
<figcaption aria-hidden="true">image-20220604195936171</figcaption>
</figure>
<p>用repeater重复发送多次之后仍然没有让输入验证码,可以考虑使用暴力破解攻击了</p>
<p>并且随便输入用户名密码尝试登录,其报告错误为<code>&lt;div id="login_error"&gt;   &lt;strong&gt;错误&lt;/strong&gt;：无效用户名。</code></p>
<p>还挺贴心地说用户名不对,这就可以让密码都是1,用sniper打用户名,直到获取到有效的用户名,再固定该用户名,sniper用密码字典打密码</p>
<p>这样就把复杂度从<span class="math inline">\(m*n\)</span>降到了<span
class="math inline">\(m+n\)</span></p>
<h4 id="wwwscan">wwwscan</h4>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;Usage&gt;:  D:\web安全\twoScan\wwwscan.exe &lt;HostName|Ip&gt; [<span class="type">Options</span>]</span><br><span class="line">&lt;Options&gt;:</span><br><span class="line">          <span class="literal">-p</span> port        : <span class="built_in">set</span> http/https port</span><br><span class="line">          <span class="literal">-m</span> thread      : <span class="built_in">set</span> max thread</span><br><span class="line">          <span class="literal">-t</span> timeout     : tcp timeout <span class="keyword">in</span> seconds</span><br><span class="line">          <span class="literal">-r</span> rootpath    : <span class="built_in">set</span> root path to scan</span><br><span class="line">          <span class="literal">-ssl</span>           : will use ssl</span><br><span class="line">&lt;Example&gt;:</span><br><span class="line">          D:\web安全\twoScan\wwwscan.exe www.target.com <span class="literal">-p</span> <span class="number">8080</span> <span class="literal">-m</span> <span class="number">10</span> <span class="literal">-t</span> <span class="number">16</span></span><br><span class="line">          D:\web安全\twoScan\wwwscan.exe www.target.com <span class="literal">-r</span> <span class="string">&quot;/test/&quot;</span> <span class="literal">-p</span> <span class="number">80</span></span><br><span class="line">          D:\web安全\twoScan\wwwscan.exe www.target.com <span class="literal">-ssl</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>-p指定目标端口</p>
<p>-m指定线程数</p>
<p>-t指定超时</p>
<p>-r指定次级目录,不写则为根目录</p>
</blockquote>
<p>首先使用nmap扫描端口,看看目标的web服务器是不是在80端口开放</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\Users\<span class="number">86135</span>&gt; nmap www.sdtxsn.com</span><br><span class="line">Starting Nmap <span class="number">7.92</span> ( https://nmap.org ) at <span class="number">2022</span><span class="literal">-06-04</span> <span class="number">20</span>:<span class="number">08</span> 中国标准时间</span><br><span class="line">Nmap scan report <span class="keyword">for</span> www.sdtxsn.com (<span class="number">121.36</span>.<span class="number">56.23</span>)</span><br><span class="line">Host is up (<span class="number">0.046</span>s latency).</span><br><span class="line">rDNS record <span class="keyword">for</span> <span class="number">121.36</span>.<span class="number">56.23</span>: ecs<span class="literal">-121-36-56-23</span>.compute.hwclouds<span class="literal">-dns</span>.com</span><br><span class="line">Not shown: <span class="number">966</span> filtered tcp ports (no<span class="literal">-response</span>), <span class="number">28</span> closed tcp ports (reset)</span><br><span class="line">PORT     STATE SERVICE</span><br><span class="line"><span class="number">22</span>/tcp   open  ssh</span><br><span class="line"><span class="number">80</span>/tcp   open  http</span><br><span class="line"><span class="number">1024</span>/tcp open  kdm</span><br><span class="line"><span class="number">3306</span>/tcp open  mysql</span><br><span class="line"><span class="number">3690</span>/tcp open  svn</span><br><span class="line"><span class="number">8888</span>/tcp open  sun<span class="literal">-answerbook</span></span><br></pre></td></tr></table></figure>
<p>确实如此,然后<code>wwwscan www.sdtxsn.com -p 80 -m 10 -t 4</code></p>
<p>但是结果wwwscan太逊了,啥也没扫到</p>
<h4 id="dirbuster">dirbuster</h4>
<p>linux上的扫站工具</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirb URL &lt;字典&gt;</span><br></pre></td></tr></table></figure>
<p>其字典在<code>/usr/share/dirb/wordlists/</code>下面放着</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/usr/share/dirb/wordlists]</span><br><span class="line">└─# <span class="built_in">ls</span> -l</span><br><span class="line">total 260</span><br><span class="line">-rw-r--r-- 1 root root 184073 Jan 25  2012 big.txt</span><br><span class="line">-rw-r--r-- 1 root root   1292 Jan 27  2012 catala.txt</span><br><span class="line">-rw-r--r-- 1 root root  35849 Nov 17  2014 common.txt</span><br><span class="line">-rw-r--r-- 1 root root   1492 May 23  2012 euskera.txt</span><br><span class="line">-rw-r--r-- 1 root root    142 Dec 29  2005 extensions_common.txt</span><br><span class="line">-rw-r--r-- 1 root root     75 Mar 16  2012 indexes.txt</span><br><span class="line">-rw-r--r-- 1 root root    244 Dec 29  2005 mutations_common.txt</span><br><span class="line">drwxr-xr-x 2 root root   4096 Apr 28 17:15 others</span><br><span class="line">-rw-r--r-- 1 root root   6561 Mar  5  2014 small.txt</span><br><span class="line">-rw-r--r-- 1 root root   3731 Nov 13  2014 spanish.txt</span><br><span class="line">drwxr-xr-x 2 root root   4096 Apr 28 17:15 stress</span><br><span class="line">drwxr-xr-x 2 root root   4096 Apr 28 17:15 vulns</span><br></pre></td></tr></table></figure>
<p>有很多本字典,甚至子文件夹里还有字典,可以把这些字典送给御剑等软件增强其功能</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali]</span><br><span class="line">└─# dirb http://www.sdtxsn.com/</span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line">DIRB v2.22</span><br><span class="line">By The Dark Raver</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">START_TIME: Sat Jun  4 20:18:46 2022</span><br><span class="line">URL_BASE: http://www.sdtxsn.com/</span><br><span class="line">WORDLIST_FILES: /usr/share/dirb/wordlists/common.txt</span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">GENERATED WORDS: 4612</span><br><span class="line"></span><br><span class="line">---- Scanning URL: http://www.sdtxsn.com/ ----</span><br><span class="line">+ http://www.sdtxsn.com/admin.php (CODE:403|SIZE:570)</span><br><span class="line">--&gt; Testing: http://www.sdtxsn.com/alert</span><br></pre></td></tr></table></figure>
<h2 id="网站源码泄漏">网站源码泄漏</h2>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604204704933.png"
alt="image-20220604204704933" />
<figcaption aria-hidden="true">image-20220604204704933</figcaption>
</figure>
<h3 id="git源码泄漏">.git源码泄漏</h3>
<p>这个玩意的原理需要稍微学一下git的使用<a
target="_blank" rel="noopener" href="https://www.runoob.com/git/git-basic-operations.html">Git 基本操作
| 菜鸟教程 (runoob.com)</a></p>
<p>这个锅应该是写CMS的一伙子程序员背</p>
<p>在<code>git init</code>初始化代码库之后会在工作目录下面生成<code>.git</code>隐藏文件</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604205017452.png"
alt="image-20220604205017452" />
<figcaption aria-hidden="true">image-20220604205017452</figcaption>
</figure>
<p>这个玩意儿是用来记录代码变更记录的,方便代码写毁球的时候退回到早期的版本</p>
<p>这个目录默认是隐藏的,在windows上如果不设置查看隐藏文件是不会显示的</p>
<p>然后写CMS的一伙子人在发布其CMS源代码的时候忘记删除这个玩意儿了,建站的企业可能对这个玩意不甚了解,以为是网站支持文件,或者由于其隐藏根本不知道有这个东西.建立的网站根目录下就藏着这么一个<code>.git</code>目录</p>
<p>诚如是,我们就可以使用GitHack下载还原出源代码</p>
<p>具体怎么各操作呢?我们首先模拟一伙子写CMS的苦逼程序员,</p>
<h4 id="程序员视角">程序员视角</h4>
<p>我们首先初始化一个版本管理仓库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PS D:\phpstudy_pro\WWW\AtomCMS&gt; git init</span><br><span class="line">Reinitialized existing Git repository in D:/phpstudy_pro/WWW/AtomCMS/.git/</span><br></pre></td></tr></table></figure>
<p>我们经历千辛万苦,终于写好了一个后端(这里直接下载了一个AtomCMS)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">PS D:\phpstudy_pro\WWW\AtomCMS&gt; dir</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    目录: D:\phpstudy_pro\WWW\AtomCMS</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Mode                 LastWriteTime         Length Name</span><br><span class="line">----                 -------------         ------ ----</span><br><span class="line">d-----         2022/4/14     21:38                .idea</span><br><span class="line">d-----         2022/4/14     18:00                admin</span><br><span class="line">d-----         2022/4/13     21:12                config</span><br><span class="line">d-----         2022/4/13     21:21                functions</span><br><span class="line">d-----         2022/4/13     20:26                images</span><br><span class="line">d-----         2022/4/13     20:26                template</span><br><span class="line">d-----         2022/4/14     17:49                uploads</span><br><span class="line">d-----         2022/4/13     20:26                views</span><br><span class="line">d-----         2022/4/13     20:26                widgets</span><br><span class="line">------        2015/10/22      3:16             22 .gitignore</span><br><span class="line">------        2015/10/22      3:16            162 .htaccess</span><br><span class="line">------        2015/10/22      3:16            301 .project</span><br><span class="line">------        2015/10/22      3:16             12 CNAME</span><br><span class="line">------        2015/10/22      3:16           5048 database-video81.sql</span><br><span class="line">------        2015/10/22      3:16           4963 database.sql</span><br><span class="line">------        2015/10/22      3:16            176 index.php</span><br><span class="line">------        2015/10/22      3:16           9872 README.md</span><br></pre></td></tr></table></figure>
<p>然后我们保存此次版本,</p>
<p>首先将代码放到暂存区</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS D:\phpstudy_pro\WWW\AtomCMS&gt; git add .</span><br></pre></td></tr></table></figure>
<p>然后将暂存区提交到本地仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PS D:\phpstudy_pro\WWW\AtomCMS&gt; git commit</span><br><span class="line">Aborting commit due to empty commit message.</span><br></pre></td></tr></table></figure>
<p>然后我们将这些东西上传到了github供其他人下载使用,但是忘记删除.git目录了.</p>
<p>程序员的工作就完成了,下面我们站在用户视角</p>
<h4 id="用户视角">用户视角</h4>
<p>用户在github上,下载了该CMS的源代码,.git也随之进入网站根目录,现在我们站在用户的视角,我们用phpstudy模拟建站的过程</p>
<p>建立网站之后,我们可以通过ip地址(内网模拟)或者域名(没买)访问该网站</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604210301690.png"
alt="image-20220604210301690" />
<figcaption aria-hidden="true">image-20220604210301690</figcaption>
</figure>
<p>用户的工作就完成了</p>
<p>现在我们站在攻击者的视角.</p>
<h4 id="攻击者视角">攻击者视角</h4>
<p>攻击者尝试访问<code>/.git</code>目录</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604210528946.png"
alt="image-20220604210528946" />
<figcaption aria-hidden="true">image-20220604210528946</figcaption>
</figure>
<p>发现没有访问权限,这个文件夹是有可能存在的,不妨试一试</p>
<p>于是他拿出了GitHack</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿Executor)-[/mnt/d/web安全/GitHack-master]</span><br><span class="line">└─$ python2 GitHack.py http://192.168.43.44/AtomCMS/.git</span><br><span class="line">[+] Download and parse index file ...</span><br><span class="line">.gitignore</span><br><span class="line">.htaccess</span><br><span class="line">.idea/.gitignore</span><br><span class="line">.idea/AtomCMS.iml</span><br><span class="line">.idea/modules.xml</span><br><span class="line">.project</span><br><span class="line">CNAME</span><br><span class="line">README.md</span><br><span class="line">admin/ajax/avatar.php</span><br><span class="line">admin/ajax/blur-save.php</span><br><span class="line">....</span><br></pre></td></tr></table></figure>
<p>真就下载到了网站源代码,保存到了<code>GitHack-master/192.168.43.44/</code>下面</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">PS D:\web安全\GitHack-master\192.168.43.44&gt; <span class="built_in">dir</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    目录: D:\web安全\GitHack-master\192.168.43.44</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Mode                 LastWriteTime         Length Name</span><br><span class="line">----                 -------------         ------ ----</span><br><span class="line">d-----          2022/6/4     20:56                .idea</span><br><span class="line">d-----          2022/6/4     20:56                admin</span><br><span class="line">d-----          2022/6/4     20:56                config</span><br><span class="line">d-----          2022/6/4     20:56                <span class="built_in">functions</span></span><br><span class="line">d-----          2022/6/4     20:56                images</span><br><span class="line">d-----          2022/6/4     20:56                template</span><br><span class="line">d-----          2022/6/4     20:56                uploads</span><br><span class="line">d-----          2022/6/4     20:56                views</span><br><span class="line">d-----          2022/6/4     20:56                widgets</span><br><span class="line">-a----          2022/6/4     21:06             22 .gitignore</span><br><span class="line">-a----          2022/6/4     21:06            162 .htaccess</span><br><span class="line">-a----          2022/6/4     21:06            301 .project</span><br><span class="line">-a----          2022/6/4     21:06             12 CNAME</span><br><span class="line">-a----          2022/6/4     21:06           5048 database-video81.sql</span><br><span class="line">-a----          2022/6/4     21:06           4963 database.sql</span><br><span class="line">-a----          2022/6/4     21:06            176 index.php</span><br><span class="line">-a----          2022/6/4     21:06           9872 README.md</span><br></pre></td></tr></table></figure>
<p>至于GitHack的原理,由于我们有GitHack.py源代码,只要想研究应该可以明白的,但是对于一个python和git都是初学的球,现在不是时候</p>
<h3 id="svn源码泄漏">SVN源码泄漏</h3>
<p>现在都用git仓库了,不会还有人使用SVN吧?</p>
<p>(其实是没学过SVN不会复现该漏洞罢了)</p>
<h3 id="ds_store文件泄漏">.DS_Store文件泄漏</h3>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604211429182.png"
alt="image-20220604211429182" />
<figcaption aria-hidden="true">image-20220604211429182</figcaption>
</figure>
<p>苹果电脑吗...不想研究</p>
<h3 id="网站备份文件泄漏">网站备份文件泄漏</h3>
<p>该漏洞需要两个条件</p>
<p>1.存在备份文件,比如.swp,.bak,.zip等类型</p>
<blockquote>
<p>这是有可能的,比如网站升级或者修改的时候,一个有着"好"习惯的管理员都应该备份一下再做修改.但是备份在网站目录下就不对了</p>
</blockquote>
<p>2.网站没有设置好访问权限,导致这些备份文件可以被访问下载</p>
<h4 id="swp文件">swp文件</h4>
<p>如果后端在linux上,那么有很大机率管理员会使用vim修改文件</p>
<p>当vim修改文件并正常退出(<code>Esc之后:wq</code>)则啥事没有</p>
<p>如果管理员很暴躁,<code>vim</code>打开文件之后直接<code>Ctrl+z</code>中断退出,则会在同一目录下留下<code>.swp</code>文件</p>
<blockquote>
<p>实际上是编辑时产生,正常退出时删除,</p>
<p>ctrl+c导致没有正常退出,没有删除</p>
<p>为啥编辑时要产生这么一个文件呢?</p>
<p>试想如果编辑了一阵子改毁球了,怎么撤销修改退回一开始的版本呢?这就是刚开始编辑时生成的swp文件的作用</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿Executor)-[/mnt/d/phpstudy_pro/www/atomcms]</span><br><span class="line">└─$ <span class="built_in">ls</span> -a -l</span><br><span class="line">total 36</span><br><span class="line">drwxrwxrwx 1 kali kali 4096 Jun  4 21:18 .</span><br><span class="line">drwxrwxrwx 1 kali kali 4096 Apr 26 20:53 ..</span><br><span class="line">...</span><br><span class="line">-rwxrwxrwx 1 kali kali  176 Oct 22  2015 index.php</span><br><span class="line">-rwxrwxrwx 1 kali kali 4096 Jun  4 21:18 .index.php.swo</span><br><span class="line">-rwxrwxrwx 1 kali kali 4096 Jun  4 21:18 .index.php.swp</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>这里<code>.index.php.swp</code>就是备份文件,<code>.swo</code>是两次暴躁生成
的,下一次再暴躁就有<code>.swn</code>了</p>
<p>诚如是,则在URL中直接访问该<code>.index.php.swp</code>文件就可以看到文件源代码了(意思是该文件会被作为.txt解析)</p>
<p>然鹅我做实验时访问该文件会获得http505状态码</p>
<h4 id="zip文件">zip文件</h4>
<p>如果在网站目录下面有一个zip文件,那么在URL上访问它是可以直接下载的</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604213228081.png"
alt="image-20220604213228081" />
<figcaption aria-hidden="true">image-20220604213228081</figcaption>
</figure>
<p>如果网站管理员又懒又屑,建站的时候直接把压缩包放在根目录下面解压建站,完事儿还忘记删除该压缩包,这就相当于直接把白盒给我们了</p>
<h3 id="漏洞修复">漏洞修复</h3>
<p>1.删除不该有的文件和目录</p>
<p>.git,.svn,.zip,.bak,.DS_Store等等</p>
<p>2.修改web服务器的配置文件,拒绝对.svn,.git路径的访问</p>
<h2 id="目标历史漏洞收集">目标历史漏洞收集</h2>
<p>收集目标站点的CMS,中间件,数据库,操作系统等组件的类型版本信息,然后去各大漏洞库查询该版本曝光的漏洞</p>
<p>比如阿里云漏洞库</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604223309338.png"
alt="image-20220604223309338" />
<figcaption aria-hidden="true">image-20220604223309338</figcaption>
</figure>
<p>就可以根据别人的漏洞复现进行攻击了</p>
<p>相当于有老师带着做的白盒测试</p>
<h3 id="阿里云漏洞库"><a
target="_blank" rel="noopener" href="https://avd.aliyun.com/">阿里云漏洞库</a></h3>
<p>查询wordpressCMS的所有漏洞</p>
<figure>
<img
src="../AppData/Roaming/Typora/typora-user-images/image-20220604232200215.png"
alt="image-20220604232200215" />
<figcaption aria-hidden="true">image-20220604232200215</figcaption>
</figure>
<h3 id="国家信息安全漏洞库cnnvd"><a
target="_blank" rel="noopener" href="http://www.cnnvd.org.cn/web/vulnerability/queryLds.tag">国家信息安全漏洞库CNNVD</a></h3>
<h2 id="waf识别">WAF识别</h2>
<p>WAF(web application firewell)web应用防火墙</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220604235137919.png"
alt="image-20220604235137919" />
<figcaption aria-hidden="true">image-20220604235137919</figcaption>
</figure>
<p>WAF提供应用层的防护</p>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220605091858083.png"
alt="image-20220605091858083" />
<figcaption aria-hidden="true">image-20220605091858083</figcaption>
</figure>
<h3 id="waf识别-1">WAF识别</h3>
<p>发送不正确的URL访问,触发WAF的防护,根据WAF的相应判断WAF的指纹</p>
<p>常用的WAF识别工具:</p>
<p>wafw00f,nmap,sqlmap</p>
<h4 id="手工方法">手工方法</h4>
<h5 id="cookie值识别">cookie值识别</h5>
<h5 id="http响应头识别">HTTP响应头识别</h5>
<h5 id="构造恶意负载">构造恶意负载</h5>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.washun.com/search.php?q=-1%20union%20select%201</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220605094155821.png"
alt="image-20220605094155821" />
<figcaption aria-hidden="true">image-20220605094155821</figcaption>
</figure>
<h4 id="自动化工具">自动化工具</h4>
<h4 id="wafw00f">wafw00f</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali]</span><br><span class="line">└─# wafw00f http://www.sdtxsn.com/</span><br><span class="line"></span><br><span class="line">                ______</span><br><span class="line">               /      \</span><br><span class="line">              (  W00f! )</span><br><span class="line">               \  ____/</span><br><span class="line">               ,,    __            404 Hack Not Found</span><br><span class="line">           |`-.__   / /                      __     __</span><br><span class="line">           /<span class="string">&quot;  _/  /_/                       \ \   / /</span></span><br><span class="line"><span class="string">          *===*    /                          \ \_/ /  405 Not Allowed</span></span><br><span class="line"><span class="string">         /     )__//                           \   /</span></span><br><span class="line"><span class="string">    /|  /     /---`                        403 Forbidden</span></span><br><span class="line"><span class="string">    \\/`   \ |                                 / _ \</span></span><br><span class="line"><span class="string">    `\    /_\\_              502 Bad Gateway  / / \ \  500 Internal Error</span></span><br><span class="line"><span class="string">      `_____``-`                             /_/   \_\</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                        ~ WAFW00F : v2.1.0 ~</span></span><br><span class="line"><span class="string">        The Web Application Firewall Fingerprinting Toolkit</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[*] Checking http://www.sdtxsn.com/</span></span><br><span class="line"><span class="string">[+] Generic Detection results:</span></span><br><span class="line"><span class="string">[-] No WAF detected by the generic detection</span></span><br><span class="line"><span class="string">[~] Number of requests: 7</span></span><br></pre></td></tr></table></figure>
<p>wafw00f没有检测出waf</p>
<h4 id="nmap-1">nmap</h4>
<p>测试waf是否存在</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap &lt;目标域名&gt; --script=http-waf-detect.nse </span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali]</span><br><span class="line">└─# nmap www.sdtxsn.com --script=http-waf-detect.nse -p 80</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-05 09:33 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> www.sdtxsn.com (121.36.56.23)</span><br><span class="line">Host is up (0.044s latency).</span><br><span class="line">rDNS record <span class="keyword">for</span> 121.36.56.23: ecs-121-36-56-23.compute.hwclouds-dns.com</span><br><span class="line"></span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">80/tcp open  http</span><br><span class="line"></span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 2.29 seconds</span><br></pre></td></tr></table></figure>
<p>这里就没有检测到waf存在</p>
<p>拿学校官网试一下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali]</span><br><span class="line">└─# nmap ehall.xidian.edu.cn --script=http-waf-detect.nse -p 80</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-05 09:34 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> ehall.xidian.edu.cn (61.150.43.100)</span><br><span class="line">Host is up (0.022s latency).</span><br><span class="line"></span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">80/tcp open  http</span><br><span class="line">| http-waf-detect: IDS/IPS/WAF detected:</span><br><span class="line">|_ehall.xidian.edu.cn:80/?p4yl04d3=&lt;script&gt;alert(document.cookie)&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 9.34 seconds</span><br></pre></td></tr></table></figure>
<p>发现是有防火墙存在的,检测方法是在主页上构造xss攻击负载,结果被拦截</p>
<p>判断waf指纹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap &lt;目标域名&gt; --script=http-waf-fingerprint</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali]</span><br><span class="line">└─# nmap ehall.xidian.edu.cn --script=http-waf-fingerprint -p 80,443</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-05 09:37 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> ehall.xidian.edu.cn (61.150.43.100)</span><br><span class="line">Host is up (0.027s latency).</span><br><span class="line"></span><br><span class="line">PORT    STATE SERVICE</span><br><span class="line">80/tcp  open  http</span><br><span class="line">443/tcp open  https</span><br><span class="line"></span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 6.28 seconds</span><br></pre></td></tr></table></figure>
<p>没有检测出来</p>
<h4 id="sqlmap">sqlmap</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿Executor)-[/home/kali]</span><br><span class="line">└─# sqlmap -u http://ehall.xidian.edu.cn/ --batch</span><br><span class="line">...</span><br><span class="line">[09:43:12] [CRITICAL] WAF/IPS identified as <span class="string">&#x27;WTS&#x27;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h2 id="信息收集总结">信息收集总结</h2>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220605095016581.png"
alt="image-20220605095016581" />
<figcaption aria-hidden="true">image-20220605095016581</figcaption>
</figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220605095048717.png"
alt="image-20220605095048717" />
<figcaption aria-hidden="true">image-20220605095048717</figcaption>
</figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220605095108752.png"
alt="image-20220605095108752" />
<figcaption aria-hidden="true">image-20220605095108752</figcaption>
</figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220605095126687.png"
alt="image-20220605095126687" />
<figcaption aria-hidden="true">image-20220605095126687</figcaption>
</figure>
<figure>
<img
src="https://raw.githubusercontent.com/DeutschBall/test/master/image-20220605095133730.png"
alt="image-20220605095133730" />
<figcaption aria-hidden="true">image-20220605095133730</figcaption>
</figure>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author:  </strong>dustball
  </li>
  <li class="post-copyright-link">
    <strong>Post link: </strong>
    <a href="http://deutschball.github.io/2022/06/05/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/" title="渗透测试信息收集">http://deutschball.github.io/2022/06/05/信息收集/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/" rel="tag"># 渗透测试</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/06/03/xctf-pwn-%E6%96%B0%E6%89%8B10%E9%A2%98/" rel="prev" title="xctf攻防世界-pwn-新手村">
      <i class="fa fa-chevron-left"></i> xctf攻防世界-pwn-新手村
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/06/06/%E6%B5%AE%E7%82%B9%E6%95%B0/" rel="next" title="CSAPP-chapter2&3 浮点数的机器级表示">
      CSAPP-chapter2&3 浮点数的机器级表示 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="nav-number">1.</span> <span class="nav-text">渗透测试信息收集</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%9F%E5%90%8D%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="nav-number">1.1.</span> <span class="nav-text">域名信息收集</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#whois%E5%9F%9F%E5%90%8D%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="nav-number">1.1.1.</span> <span class="nav-text">Whois域名信息收集</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%90%E5%9F%9F%E5%90%8D%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="nav-number">1.1.2.</span> <span class="nav-text">子域名信息收集</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E6%96%B9%E6%B3%95"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">搜索引擎方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%88%AC%E8%99%AB%E6%96%B9%E6%B3%95"><span class="nav-number">1.1.2.2.</span> <span class="nav-text">爬虫方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%90%E5%9F%9F%E5%90%8D%E6%9F%A5%E8%AF%A2%E7%BD%91%E7%AB%99"><span class="nav-number">1.1.2.3.</span> <span class="nav-text">子域名查询网站</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E5%B7%A5%E5%85%B7"><span class="nav-number">1.1.2.4.</span> <span class="nav-text">本地工具</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#layer%E5%AD%90%E5%9F%9F%E5%90%8D%E6%8C%96%E6%8E%98%E6%9C%BA"><span class="nav-number">1.1.2.4.1.</span> <span class="nav-text">Layer子域名挖掘机</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#wydomain"><span class="nav-number">1.1.2.4.2.</span> <span class="nav-text">wydomain</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%87%E6%A1%88%E5%8F%B7%E6%9F%A5%E8%AF%A2"><span class="nav-number">1.1.2.5.</span> <span class="nav-text">备案号查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ssl%E8%AF%81%E4%B9%A6%E6%9F%A5%E8%AF%A2"><span class="nav-number">1.1.2.6.</span> <span class="nav-text">SSL证书查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#crossdomain.xml%E6%96%87%E4%BB%B6"><span class="nav-number">1.1.2.7.</span> <span class="nav-text">crossdomain.xml文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dns%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="nav-number">1.1.3.</span> <span class="nav-text">DNS信息收集</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#dns%E8%AE%B0%E5%BD%95%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.1.3.1.</span> <span class="nav-text">DNS记录类型</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#typea"><span class="nav-number">1.1.3.1.1.</span> <span class="nav-text">Type&#x3D;A</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#typens"><span class="nav-number">1.1.3.1.2.</span> <span class="nav-text">Type&#x3D;NS</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#typecname"><span class="nav-number">1.1.3.1.3.</span> <span class="nav-text">Type&#x3D;CNAME</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#typemx"><span class="nav-number">1.1.3.1.4.</span> <span class="nav-text">Type&#x3D;MX</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dns%E8%AE%B0%E5%BD%95%E6%9F%A5%E8%AF%A2"><span class="nav-number">1.1.3.2.</span> <span class="nav-text">DNS记录查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2a%E8%AE%B0%E5%BD%95"><span class="nav-number">1.1.3.2.1.</span> <span class="nav-text">查询A记录</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2mx%E8%AE%B0%E5%BD%95"><span class="nav-number">1.1.3.2.2.</span> <span class="nav-text">查询MX记录</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2nx%E8%AE%B0%E5%BD%95"><span class="nav-number">1.1.3.2.3.</span> <span class="nav-text">查询NX记录</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.1.3.2.4.</span> <span class="nav-text">查询所有类型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BA%A4%E4%BA%92%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.1.3.2.5.</span> <span class="nav-text">交互模式</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%88%A9%E7%94%A8"><span class="nav-number">1.1.4.</span> <span class="nav-text">搜索引擎利用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%90%9C%E7%B4%A2"><span class="nav-number">1.1.4.1.</span> <span class="nav-text">基本搜索</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E4%B8%8Eand"><span class="nav-number">1.1.4.1.1.</span> <span class="nav-text">逻辑与AND</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E6%88%96"><span class="nav-number">1.1.4.1.2.</span> <span class="nav-text">逻辑或</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E9%9D%9E"><span class="nav-number">1.1.4.1.3.</span> <span class="nav-text">逻辑非</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%9A%E9%85%8D"><span class="nav-number">1.1.4.1.4.</span> <span class="nav-text">通配</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95"><span class="nav-number">1.1.4.2.</span> <span class="nav-text">进阶用法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%99%90%E5%AE%9A%E7%AB%99%E7%82%B9%E8%8C%83%E5%9B%B4"><span class="nav-number">1.1.4.2.1.</span> <span class="nav-text">限定站点范围</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A0%87%E9%A2%98%E5%90%AB%E6%9C%89%E5%85%B3%E9%94%AE%E8%AF%8D"><span class="nav-number">1.1.4.2.2.</span> <span class="nav-text">标题含有关键词</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A0%87%E9%A2%98%E5%90%AB%E6%9C%89%E5%A4%9A%E7%BB%84%E5%85%B3%E9%94%AE%E8%AF%8D"><span class="nav-number">1.1.4.2.3.</span> <span class="nav-text">标题含有多组关键词</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%89%80%E6%9C%89%E9%93%BE%E6%8E%A5%E5%88%B0%E6%9F%90%E4%B8%AAurl%E5%9C%B0%E5%9D%80%E7%9A%84%E7%BD%91%E9%A1%B5"><span class="nav-number">1.1.4.2.4.</span> <span class="nav-text">所有链接到某个URL地址的网页</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%90%AB%E6%9C%89%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84url%E5%9C%B0%E5%9D%80"><span class="nav-number">1.1.4.2.5.</span> <span class="nav-text">含有关键字的url地址</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%89%B9%E5%AE%9A%E6%8B%93%E5%B1%95%E5%90%8D%E6%96%87%E4%BB%B6"><span class="nav-number">1.1.4.2.6.</span> <span class="nav-text">特定拓展名文件</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%85%8D%E5%90%88%E5%BA%94%E7%94%A8"><span class="nav-number">1.1.4.3.</span> <span class="nav-text">配合应用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BB%E6%9C%BA%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="nav-number">1.2.</span> <span class="nav-text">主机信息收集</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#nmap"><span class="nav-number">1.2.0.1.</span> <span class="nav-text">nmap</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%BB%E6%9C%BA%E5%8F%91%E7%8E%B0"><span class="nav-number">1.2.0.1.1.</span> <span class="nav-text">主机发现</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#sl%E5%88%97%E5%87%BA%E5%B0%86%E8%A6%81%E6%89%AB%E6%8F%8F%E7%9A%84ip%E5%9C%B0%E5%9D%80%E4%BD%86%E6%98%AF%E4%B8%8D%E8%BF%9B%E8%A1%8C%E4%B8%BB%E6%9C%BA%E5%8F%91%E7%8E%B0"><span class="nav-number">1.2.0.1.2.</span> <span class="nav-text">-sL列出将要扫描的IP地址,但是不进行主机发现</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#sn-sp%E5%8F%AA%E8%BF%9B%E8%A1%8C%E4%B8%BB%E6%9C%BA%E5%8F%91%E7%8E%B0%E4%B8%8D%E8%BF%9B%E8%A1%8C%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F"><span class="nav-number">1.2.0.1.3.</span> <span class="nav-text">-sn&#x2F;-sP只进行主机发现,不进行端口扫描</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pn%E8%AE%A4%E4%B8%BA%E4%B8%BB%E6%9C%BA%E9%83%BD%E5%AD%98%E6%B4%BB%E7%9B%B4%E6%8E%A5%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F"><span class="nav-number">1.2.0.1.4.</span> <span class="nav-text">-Pn认为主机都存活,直接端口扫描</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pspapupy%E4%BD%BF%E7%94%A8%E5%90%84%E7%A7%8D%E5%8D%8F%E8%AE%AE%E6%96%B9%E5%BC%8F%E8%BF%9B%E8%A1%8C%E6%89%AB%E6%8F%8F"><span class="nav-number">1.2.0.1.5.</span> <span class="nav-text">-PS&#x2F;PA&#x2F;PU&#x2F;PY使用各种协议方式进行扫描</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#ps%E4%BD%BF%E7%94%A8tcp-syn%E6%96%B9%E5%BC%8F%E8%BF%9B%E8%A1%8C%E4%B8%BB%E6%9C%BA%E5%8F%91%E7%8E%B0"><span class="nav-number">1.2.0.1.5.1.</span> <span class="nav-text">-PS使用TCP
SYN方式进行主机发现</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#pa%E4%BD%BF%E7%94%A8tcp%E5%8D%8F%E8%AE%AEack%E5%8C%85%E8%BF%9B%E8%A1%8C%E4%B8%BB%E6%9C%BA%E5%8F%91%E7%8E%B0"><span class="nav-number">1.2.0.1.5.2.</span> <span class="nav-text">-PA使用TCP协议ACK包进行主机发现</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#pu%E4%BD%BF%E7%94%A8udp%E5%8D%8F%E8%AE%AE%E8%BF%9B%E8%A1%8C%E4%B8%BB%E6%9C%BA%E5%8F%91%E7%8E%B0"><span class="nav-number">1.2.0.1.5.3.</span> <span class="nav-text">-PU使用UDP协议进行主机发现</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#py%E4%BD%BF%E7%94%A8sctp%E5%8D%8F%E8%AE%AEinit%E5%8C%85%E8%BF%9B%E8%A1%8C%E4%B8%BB%E6%9C%BA%E5%8F%91%E7%8E%B0"><span class="nav-number">1.2.0.1.5.4.</span> <span class="nav-text">-PY使用SCTP协议INIT包进行主机发现</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F"><span class="nav-number">1.2.0.1.6.</span> <span class="nav-text">端口扫描</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AB%AF%E5%8F%A3%E7%8A%B6%E6%80%81"><span class="nav-number">1.2.0.1.7.</span> <span class="nav-text">端口状态</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#netstat--n%E6%9F%A5%E7%9C%8B%E6%9C%AC%E6%9C%BA%E7%AB%AF%E5%8F%A3%E7%8A%B6%E6%80%81"><span class="nav-number">1.2.0.1.7.1.</span> <span class="nav-text">netstat -n查看本机端口状态</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%8D%E6%8C%87%E5%AE%9A%E5%8F%82%E6%95%B0"><span class="nav-number">1.2.0.1.8.</span> <span class="nav-text">不指定参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#p-port%E6%89%AB%E6%8F%8F%E6%8C%87%E5%AE%9A%E7%AB%AF%E5%8F%A3"><span class="nav-number">1.2.0.1.9.</span> <span class="nav-text">-p &lt;port&gt;扫描指定端口</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#f%E5%BF%AB%E9%80%9F%E6%A8%A1%E5%BC%8F%E5%8F%AA%E6%89%AB%E6%8F%8Fnmap-services%E4%B8%AD%E5%88%97%E5%87%BA%E7%9A%84%E7%AB%AF%E5%8F%A3"><span class="nav-number">1.2.0.1.10.</span> <span class="nav-text">-F快速模式,只扫描nmap-services中列出的端口</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%A3%80%E6%B5%8B"><span class="nav-number">1.2.0.2.</span> <span class="nav-text">操作系统检测</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#o%E8%BF%9B%E8%A1%8C%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%A3%80%E6%B5%8B-a%E8%BF%9B%E8%A1%8C%E7%89%88%E6%9C%AC%E6%A3%80%E6%B5%8B"><span class="nav-number">1.2.0.2.1.</span> <span class="nav-text">-O进行操作系统检测,-A进行版本检测</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E6%96%B9%E6%B3%95"><span class="nav-number">1.2.0.2.2.</span> <span class="nav-text">其他方法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#masscan"><span class="nav-number">1.2.1.</span> <span class="nav-text">masscan</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AB%AF%E5%8F%A3%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8"><span class="nav-number">1.2.2.</span> <span class="nav-text">端口漏洞利用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%81%E7%AB%99"><span class="nav-number">1.3.</span> <span class="nav-text">旁站</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E7%BA%BF%E7%BD%91%E7%AB%99%E6%9F%A5%E6%97%81%E7%AB%99"><span class="nav-number">1.3.1.</span> <span class="nav-text">在线网站查旁站</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E5%B7%A5%E5%85%B7%E6%9F%A5%E6%97%81%E7%AB%99"><span class="nav-number">1.3.2.</span> <span class="nav-text">本地工具查旁站</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AB%AF%E5%8F%A3%E6%9F%A5%E6%97%81%E7%AB%99"><span class="nav-number">1.3.3.</span> <span class="nav-text">端口查旁站</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#c%E6%AE%B5"><span class="nav-number">1.4.</span> <span class="nav-text">C段</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E7%BA%BF%E6%8E%A5%E5%8F%A3%E6%9F%A5%E8%AF%A2"><span class="nav-number">1.4.1.</span> <span class="nav-text">在线接口查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E5%B7%A5%E5%85%B7%E6%89%AB%E6%8F%8F"><span class="nav-number">1.4.2.</span> <span class="nav-text">本地工具扫描</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#nmap%E6%89%AB%E6%8F%8Fc%E6%AE%B5"><span class="nav-number">1.4.2.1.</span> <span class="nav-text">nmap扫描C段</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#iis-put-scanner"><span class="nav-number">1.4.2.2.</span> <span class="nav-text">IIS Put Scanner</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%87%E7%BA%B9%E8%AF%86%E5%88%AB"><span class="nav-number">1.5.</span> <span class="nav-text">指纹识别</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E7%BA%BF%E6%8C%87%E7%BA%B9%E8%AF%86%E5%88%AB"><span class="nav-number">1.5.1.</span> <span class="nav-text">在线指纹识别</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#what-cms"><span class="nav-number">1.5.1.1.</span> <span class="nav-text">What CMS</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#yunsee"><span class="nav-number">1.5.1.2.</span> <span class="nav-text">yunsee</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E5%B7%A5%E5%85%B7-1"><span class="nav-number">1.5.2.</span> <span class="nav-text">本地工具</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BE%A1%E5%89%91"><span class="nav-number">1.5.2.1.</span> <span class="nav-text">御剑</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#whatweb"><span class="nav-number">1.5.2.2.</span> <span class="nav-text">whatweb</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%8C%87%E7%BA%B9%E8%AF%86%E5%88%AB"><span class="nav-number">1.5.3.</span> <span class="nav-text">操作系统指纹识别</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#curl---head-url"><span class="nav-number">1.5.3.1.</span> <span class="nav-text">curl --head &lt;URL&gt;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#nmap--o--a"><span class="nav-number">1.5.3.2.</span> <span class="nav-text">nmap -O -A</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E7%AB%99%E8%B7%AF%E5%BE%84%E6%89%AB%E6%8F%8F"><span class="nav-number">1.6.</span> <span class="nav-text">网站路径扫描</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E7%90%86"><span class="nav-number">1.6.1.</span> <span class="nav-text">原理:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7"><span class="nav-number">1.6.2.</span> <span class="nav-text">本地自动化工具</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BE%A1%E5%89%911.5"><span class="nav-number">1.6.2.1.</span> <span class="nav-text">御剑1.5</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#burpsuite"><span class="nav-number">1.6.2.2.</span> <span class="nav-text">burpsuite</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#wwwscan"><span class="nav-number">1.6.2.3.</span> <span class="nav-text">wwwscan</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dirbuster"><span class="nav-number">1.6.2.4.</span> <span class="nav-text">dirbuster</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E7%AB%99%E6%BA%90%E7%A0%81%E6%B3%84%E6%BC%8F"><span class="nav-number">1.7.</span> <span class="nav-text">网站源码泄漏</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#git%E6%BA%90%E7%A0%81%E6%B3%84%E6%BC%8F"><span class="nav-number">1.7.1.</span> <span class="nav-text">.git源码泄漏</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A8%8B%E5%BA%8F%E5%91%98%E8%A7%86%E8%A7%92"><span class="nav-number">1.7.1.1.</span> <span class="nav-text">程序员视角</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E8%A7%86%E8%A7%92"><span class="nav-number">1.7.1.2.</span> <span class="nav-text">用户视角</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%94%BB%E5%87%BB%E8%80%85%E8%A7%86%E8%A7%92"><span class="nav-number">1.7.1.3.</span> <span class="nav-text">攻击者视角</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#svn%E6%BA%90%E7%A0%81%E6%B3%84%E6%BC%8F"><span class="nav-number">1.7.2.</span> <span class="nav-text">SVN源码泄漏</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ds_store%E6%96%87%E4%BB%B6%E6%B3%84%E6%BC%8F"><span class="nav-number">1.7.3.</span> <span class="nav-text">.DS_Store文件泄漏</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E7%AB%99%E5%A4%87%E4%BB%BD%E6%96%87%E4%BB%B6%E6%B3%84%E6%BC%8F"><span class="nav-number">1.7.4.</span> <span class="nav-text">网站备份文件泄漏</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#swp%E6%96%87%E4%BB%B6"><span class="nav-number">1.7.4.1.</span> <span class="nav-text">swp文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#zip%E6%96%87%E4%BB%B6"><span class="nav-number">1.7.4.2.</span> <span class="nav-text">zip文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%BC%8F%E6%B4%9E%E4%BF%AE%E5%A4%8D"><span class="nav-number">1.7.5.</span> <span class="nav-text">漏洞修复</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%AE%E6%A0%87%E5%8E%86%E5%8F%B2%E6%BC%8F%E6%B4%9E%E6%94%B6%E9%9B%86"><span class="nav-number">1.8.</span> <span class="nav-text">目标历史漏洞收集</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%98%BF%E9%87%8C%E4%BA%91%E6%BC%8F%E6%B4%9E%E5%BA%93"><span class="nav-number">1.8.1.</span> <span class="nav-text">阿里云漏洞库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%BD%E5%AE%B6%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%BC%8F%E6%B4%9E%E5%BA%93cnnvd"><span class="nav-number">1.8.2.</span> <span class="nav-text">国家信息安全漏洞库CNNVD</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#waf%E8%AF%86%E5%88%AB"><span class="nav-number">1.9.</span> <span class="nav-text">WAF识别</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#waf%E8%AF%86%E5%88%AB-1"><span class="nav-number">1.9.1.</span> <span class="nav-text">WAF识别</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%8B%E5%B7%A5%E6%96%B9%E6%B3%95"><span class="nav-number">1.9.1.1.</span> <span class="nav-text">手工方法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#cookie%E5%80%BC%E8%AF%86%E5%88%AB"><span class="nav-number">1.9.1.1.1.</span> <span class="nav-text">cookie值识别</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#http%E5%93%8D%E5%BA%94%E5%A4%B4%E8%AF%86%E5%88%AB"><span class="nav-number">1.9.1.1.2.</span> <span class="nav-text">HTTP响应头识别</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E6%81%B6%E6%84%8F%E8%B4%9F%E8%BD%BD"><span class="nav-number">1.9.1.1.3.</span> <span class="nav-text">构造恶意负载</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7"><span class="nav-number">1.9.1.2.</span> <span class="nav-text">自动化工具</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#wafw00f"><span class="nav-number">1.9.1.3.</span> <span class="nav-text">wafw00f</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#nmap-1"><span class="nav-number">1.9.1.4.</span> <span class="nav-text">nmap</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sqlmap"><span class="nav-number">1.9.1.5.</span> <span class="nav-text">sqlmap</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E6%80%BB%E7%BB%93"><span class="nav-number">1.10.</span> <span class="nav-text">信息收集总结</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="dustball"
      src="https://raw.githubusercontent.com/DeutschBall/picbed/main/dustball.png">
  <p class="site-author-name" itemprop="name">dustball</p>
  <div class="site-description" itemprop="description">dustland</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">39</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">dustball</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

        
<div class="busuanzi-count">
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  
  <script data-pjax>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="//cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
<script src="//cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script>
<script src="/js/algolia-search.js"></script>












<script data-pjax>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'dark',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


    <div id="pjax">
  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

    </div>
</body>
</html>
